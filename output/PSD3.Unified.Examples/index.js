// Generated by purs version 0.15.15
import * as Data_Function from "../Data.Function/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as PSD3_AST from "../PSD3.AST/index.js";
import * as PSD3_Expr_Interpreter_Eval from "../PSD3.Expr.Interpreter.Eval/index.js";
import * as PSD3_Internal_Selection_Types from "../PSD3.Internal.Selection.Types/index.js";
import * as PSD3_Unified_Attribute from "../PSD3.Unified.Attribute/index.js";
import * as PSD3_Unified_DataDSL from "../PSD3.Unified.DataDSL/index.js";
import * as PSD3_Unified_Display from "../PSD3.Unified.Display/index.js";
import * as PSD3_Unified_Join from "../PSD3.Unified.Join/index.js";
var source = /* #__PURE__ */ PSD3_Unified_DataDSL.source(PSD3_Expr_Interpreter_Eval.dataDSLEvalD);
var simpleJoinExample = function (points) {
    var circleTemplate = function (v) {
        return PSD3_AST.elem(PSD3_Internal_Selection_Types.Circle.value)([ PSD3_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attrStatic("fill")("steelblue") ]);
    };
    return PSD3_Unified_Join.toTree(PSD3_Unified_Join.join("circles")("circle")(points)(circleTemplate));
};
var profitDisplay = PSD3_Unified_Display.signedD;
var percentDisplay = /* #__PURE__ */ PSD3_Unified_Display.composeD(/* #__PURE__ */ PSD3_Unified_Display.composeD(/* #__PURE__ */ PSD3_Unified_Display.composeD(/* #__PURE__ */ PSD3_Unified_Display.scaleD(100.0))(/* #__PURE__ */ PSD3_Unified_Display.roundD(1)))(PSD3_Unified_Display.showNumD))(/* #__PURE__ */ PSD3_Unified_Display.suffixD("%"));
var quarterGrowthDisplay = /* #__PURE__ */ (function () {
    var computeGrowthRate = function (q) {
        return (q.revenue - q.expenses) / q.expenses;
    };
    return PSD3_Unified_Display.lmapD(computeGrowthRate)(percentDisplay);
})();
var showAsPercent = /* #__PURE__ */ PSD3_Unified_Display.runDisplay(percentDisplay);
var newStyleViz = function (dataPoints) {
    return PSD3_AST.joinData("points")("circle")(dataPoints)(function (v) {
        return PSD3_AST.elem(PSD3_Internal_Selection_Types.Circle.value)([ PSD3_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attrStatic("fill")("steelblue"), PSD3_Unified_Attribute.attrStatic("stroke")("white"), PSD3_Unified_Attribute.attrStatic("stroke-width")("1") ]);
    });
};
var newStyleCircleFormatted = function (v) {
    return [ PSD3_Unified_Attribute.attr("cx")(function (v1) {
        return v1.x;
    })(PSD3_Unified_Display.composeD(PSD3_Unified_Display.scaleD(10.0))(PSD3_Unified_Display.showNumD)), PSD3_Unified_Attribute.attr("cy")(function (v1) {
        return v1.y;
    })(PSD3_Unified_Display.composeD(PSD3_Unified_Display.scaleD(10.0))(PSD3_Unified_Display.showNumD)), PSD3_Unified_Attribute.attr("r")(function (v1) {
        return v1.value;
    })(PSD3_Unified_Display.composeD(PSD3_Unified_Display.clampD(5.0)(50.0))(PSD3_Unified_Display.showNumD)), PSD3_Unified_Attribute.attr("fill")(function (v1) {
        return v1.category;
    })(PSD3_Unified_Display.idD) ];
};
var newStyleCircle = function (v) {
    return [ PSD3_Unified_Attribute.attr("cx")(function (v1) {
        return v1.x;
    })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("cy")(function (v1) {
        return v1.y;
    })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("r")(function (v1) {
        return v1.value;
    })(PSD3_Unified_Display.composeD(PSD3_Unified_Display.roundD(1))(PSD3_Unified_Display.showNumD)), PSD3_Unified_Attribute.attr("fill")(function (v1) {
        return v1.category;
    })(PSD3_Unified_Display.idD) ];
};
var nestedJoinExample = function (scene) {
    var circleTemplate = function (v) {
        return PSD3_AST.elem(PSD3_Internal_Selection_Types.Circle.value)([ PSD3_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(PSD3_Unified_Display.showNumD) ]);
    };
    return PSD3_Unified_Join.toTree(PSD3_Unified_Join.nestedJoin("points")("circle")([ scene ])(function (v) {
        return v.points;
    })(circleTemplate));
};
var myComputation = function (dictDataDSL) {
    var avgA = PSD3_Unified_DataDSL.avgA(dictDataDSL);
    var filterA = PSD3_Unified_DataDSL.filterA(dictDataDSL);
    var mapA = PSD3_Unified_DataDSL.mapA(dictDataDSL);
    return function (data_) {
        return avgA(filterA(function (x) {
            return x > 0.0;
        })(mapA(function (x) {
            return x * 1.1;
        })(data_)));
    };
};
var myComputation1 = /* #__PURE__ */ myComputation(PSD3_Expr_Interpreter_Eval.dataDSLEvalD);
var useInViz = function (data_) {
    var v = myComputation1(source(new PSD3_Unified_DataDSL.InlineSource(data_)));
    return v(Data_Unit.unit)(0);
};
var joinWithGUPExample = function (points) {
    var circleTemplate = function (v) {
        return PSD3_AST.elem(PSD3_Internal_Selection_Types.Circle.value)([ PSD3_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(PSD3_Unified_Display.showNumD) ]);
    };
    return PSD3_Unified_Join.toTree(PSD3_Unified_Join.withGUP({
        enter: new Data_Maybe.Just(PSD3_Unified_Join.enterSpec([ PSD3_Unified_Attribute.attr("r")(Data_Function["const"](0.0))(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("opacity")(Data_Function["const"](0.0))(PSD3_Unified_Display.showNumD) ])(Data_Maybe.Nothing.value)),
        update: new Data_Maybe.Just(PSD3_Unified_Join.updateSpec([  ])(Data_Maybe.Nothing.value)),
        exit: new Data_Maybe.Just(PSD3_Unified_Join.exitSpec([ PSD3_Unified_Attribute.attr("opacity")(Data_Function["const"](0.0))(PSD3_Unified_Display.showNumD) ])(Data_Maybe.Nothing.value))
    })(PSD3_Unified_Join.join("circles")("circle")(points)(circleTemplate)));
};
var fullJoinExample = function (scene) {
    var gupSpec = {
        enter: new Data_Maybe.Just(PSD3_Unified_Join.noTransition([ PSD3_Unified_Attribute.attr("r")(Data_Function["const"](0.0))(PSD3_Unified_Display.showNumD) ])),
        update: Data_Maybe.Nothing.value,
        exit: new Data_Maybe.Just(PSD3_Unified_Join.noTransition([ PSD3_Unified_Attribute.attr("opacity")(Data_Function["const"](0.0))(PSD3_Unified_Display.showNumD) ]))
    };
    var circleTemplate = function (v) {
        return PSD3_AST.elem(PSD3_Internal_Selection_Types.Circle.value)([ PSD3_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(PSD3_Unified_Display.showNumD), PSD3_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(PSD3_Unified_Display.showNumD) ]);
    };
    return PSD3_Unified_Join.toTree(PSD3_Unified_Join.fullJoin("viz")("circle")([ scene ])(function (v) {
        return v.points;
    })(circleTemplate)(gupSpec));
};
var formatLabel = function (q) {
    return PSD3_Unified_Display.runDisplay(profitDisplay)(q.revenue - q.expenses);
};
var formatGrowthLabel = /* #__PURE__ */ PSD3_Unified_Display.runDisplay(quarterGrowthDisplay);
var currencyDisplay = PSD3_Unified_Display.currencyD;
var expensesDisplay = /* #__PURE__ */ PSD3_Unified_Display.lmapD(function (v) {
    return v.expenses;
})(currencyDisplay);
var revenueDisplay = /* #__PURE__ */ PSD3_Unified_Display.lmapD(function (v) {
    return v.revenue;
})(currencyDisplay);
var showAsCurrency = /* #__PURE__ */ PSD3_Unified_Display.runDisplay(currencyDisplay);
var computeProfit = function (dictDataDSL) {
    return PSD3_Unified_DataDSL.mapA(dictDataDSL)(function (q) {
        return q.revenue - q.expenses;
    });
};
var totalProfit = function (dictDataDSL) {
    var sumA = PSD3_Unified_DataDSL.sumA(dictDataDSL);
    var computeProfit1 = computeProfit(dictDataDSL);
    return function (quarters) {
        return sumA(computeProfit1(quarters));
    };
};
var computeGrowth = function (dictDataDSL) {
    return PSD3_Unified_DataDSL.mapA(dictDataDSL)(function (x) {
        return x * 1.1;
    });
};
var compactDisplay = PSD3_Unified_Display.compactD;
var averageAboveThreshold = function (dictDataDSL) {
    var avgA = PSD3_Unified_DataDSL.avgA(dictDataDSL);
    var filterA = PSD3_Unified_DataDSL.filterA(dictDataDSL);
    return function (threshold) {
        return function (data_) {
            return avgA(filterA(function (x) {
                return x > threshold;
            })(data_));
        };
    };
};
export {
    newStyleCircle,
    newStyleCircleFormatted,
    computeGrowth,
    averageAboveThreshold,
    computeProfit,
    totalProfit,
    percentDisplay,
    currencyDisplay,
    profitDisplay,
    compactDisplay,
    showAsPercent,
    showAsCurrency,
    quarterGrowthDisplay,
    revenueDisplay,
    expensesDisplay,
    newStyleViz,
    myComputation,
    useInViz,
    formatLabel,
    formatGrowthLabel,
    simpleJoinExample,
    joinWithGUPExample,
    nestedJoinExample,
    fullJoinExample
};
//# sourceMappingURL=index.js.map
