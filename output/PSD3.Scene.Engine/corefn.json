{"builtWith":"0.15.15","comments":[{"LineComment":" | Scene Engine"},{"LineComment":" |"},{"LineComment":" | Tick-based scene orchestration with adapter pattern."},{"LineComment":" |"},{"LineComment":" | The engine manages transitions between scenes using a three-phase lifecycle:"},{"LineComment":" | 1. Initialize: Apply init rules to prepare starting state"},{"LineComment":" | 2. Transition: Interpolate positions from start to target"},{"LineComment":" | 3. Finalize: Apply final rules and enter stable mode"},{"LineComment":" |"},{"LineComment":" | The engine is generic over the node type. Apps provide an adapter"},{"LineComment":" | record with functions that interact with their specific simulation."},{"LineComment":" |"},{"LineComment":" | Example usage:"},{"LineComment":" | ```purescript"},{"LineComment":" | -- Create adapter for your simulation"},{"LineComment":" | adapter = mkAdapter mySimulation"},{"LineComment":" |"},{"LineComment":" | -- Create engine"},{"LineComment":" | engineRef <- createEngine adapter"},{"LineComment":" |"},{"LineComment":" | -- Transition to a scene"},{"LineComment":" | transitionTo treeFormScene engineRef"},{"LineComment":" |"},{"LineComment":" | -- Call tick from your simulation's tick handler"},{"LineComment":" | Sim.onTick (\\_ -> tick engineRef) mySimulation"},{"LineComment":" | ```"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[179,30],"start":[179,3]}},"type":"Var","value":{"identifier":"bind","moduleName":["Control","Bind"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[179,30],"start":[179,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bindEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"bind"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[183,19],"start":[183,15]}},"type":"Var","value":{"identifier":"pure","moduleName":["Control","Applicative"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[183,24],"start":[183,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"applicativeEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"pure"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[186,60],"start":[186,7]}},"type":"Var","value":{"identifier":"discard","moduleName":["Control","Bind"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[186,60],"start":[186,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discardUnit","moduleName":["Control","Bind"]}},"type":"App"},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[186,60],"start":[186,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bindEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"discard"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[338,13],"start":[338,10]}},"type":"Var","value":{"identifier":"map","moduleName":["Data","Functor"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[338,24],"start":[338,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"functorMaybe","moduleName":["Data","Maybe"]}},"type":"App"},"identifier":"map"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[244,24],"start":[244,21]}},"type":"Var","value":{"identifier":"min","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[244,28],"start":[244,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"min"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[244,42],"start":[244,41]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[244,64],"start":[244,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[246,20],"start":[246,18]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[246,24],"start":[246,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[177,17],"start":[173,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[177,17],"start":[173,1]}},"argument":"targetScene","body":{"annotation":{"meta":null,"sourceSpan":{"end":[177,17],"start":[173,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[179,30],"start":[179,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[179,20],"start":[179,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[179,30],"start":[179,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[179,30],"start":[179,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[178,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[179,30],"start":[179,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[179,30],"start":[179,3]}},"argument":"state","body":{"annotation":{"meta":null,"sourceSpan":{"end":[209,27],"start":[182,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[183,11],"start":[183,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[183,11],"start":[183,10]}},"binderType":"NullBinder"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[183,24],"start":[183,15]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[183,24],"start":[183,20]}},"type":"Var","value":{"identifier":"unit","moduleName":["Data","Unit"]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[184,12],"start":[184,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[186,60],"start":[186,7]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[186,38],"start":[186,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[186,38],"start":[186,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[186,12],"start":[186,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[179,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"applyRulesInPlace","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[186,60],"start":[186,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[186,60],"start":[186,39]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[186,50],"start":[186,39]}},"type":"Var","value":{"identifier":"targetScene","sourcePos":[178,1]}},"fieldName":"initRules","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[186,60],"start":[186,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[186,60],"start":[186,7]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[189,47],"start":[189,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[189,47],"start":[189,25]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[189,47],"start":[189,25]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[189,30],"start":[189,25]}},"type":"Var","value":{"identifier":"state","sourcePos":[179,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"getNodes","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[189,47],"start":[189,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[189,47],"start":[189,7]}},"argument":"nodesAfterInit","body":{"annotation":{"meta":null,"sourceSpan":{"end":[190,73],"start":[190,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[190,73],"start":[190,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[190,58],"start":[190,28]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[190,58],"start":[190,28]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[190,33],"start":[190,28]}},"type":"Var","value":{"identifier":"state","sourcePos":[179,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"capturePositions","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[190,73],"start":[190,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[190,73],"start":[190,59]}},"type":"Var","value":{"identifier":"nodesAfterInit","sourcePos":[189,7]}},"type":"App"},"identifier":"startPositions"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[193,62],"start":[193,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[193,62],"start":[193,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[193,47],"start":[193,29]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[193,40],"start":[193,29]}},"type":"Var","value":{"identifier":"targetScene","sourcePos":[178,1]}},"fieldName":"layout","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[193,62],"start":[193,29]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[193,62],"start":[193,48]}},"type":"Var","value":{"identifier":"nodesAfterInit","sourcePos":[189,7]}},"type":"App"},"identifier":"targetPositions"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[206,18],"start":[196,7]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[196,16],"start":[196,7]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[205,10],"start":[196,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[204,14],"start":[197,11]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[209,27],"start":[178,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[197,16],"start":[197,11]}},"type":"Var","value":{"identifier":"state","sourcePos":[179,3]}},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[204,14],"start":[197,11]}},"copy":["adapter","currentScene","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[178,1]}},"type":"ObjectUpdate","updates":[["transition",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[198,32],"start":[198,28]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[203,18],"start":[198,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[203,18],"start":[199,17]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["targetScene",{"annotation":{"meta":null,"sourceSpan":{"end":[199,30],"start":[199,19]}},"type":"Var","value":{"identifier":"targetScene","sourcePos":[178,1]}}],["startPositions",{"annotation":{"meta":null,"sourceSpan":{"end":[200,33],"start":[200,19]}},"type":"Var","value":{"identifier":"startPositions","sourcePos":[190,11]}}],["targetPositions",{"annotation":{"meta":null,"sourceSpan":{"end":[201,34],"start":[201,19]}},"type":"Var","value":{"identifier":"targetPositions","sourcePos":[193,11]}}],["progress",{"annotation":{"meta":null,"sourceSpan":{"end":[202,32],"start":[202,29]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}]]}},"type":"App"}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[206,18],"start":[196,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,18],"start":[206,9]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[178,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[206,18],"start":[196,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,18],"start":[196,7]}},"argument":"$__unused","body":{"annotation":{"meta":null,"sourceSpan":{"end":[209,27],"start":[209,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[209,27],"start":[209,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[209,12],"start":[209,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[179,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"reheat","type":"Accessor"},"type":"Abs"},"type":"App"},"type":"Let"},"type":"Let"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[182,24],"start":[182,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[182,13],"start":[182,8]}},"type":"Var","value":{"identifier":"state","sourcePos":[179,3]}},"fieldName":"transition","type":"Accessor"}],"type":"Case"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"transitionTo"},{"annotation":{"meta":null,"sourceSpan":{"end":[352,17],"start":[348,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[352,17],"start":[348,1]}},"argument":"scene","body":{"annotation":{"meta":null,"sourceSpan":{"end":[352,17],"start":[348,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[354,14],"start":[354,3]}},"type":"Var","value":{"identifier":"modify_","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[354,48],"start":[354,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[354,47],"start":[354,16]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[354,47],"start":[354,16]}},"copy":["adapter","transition","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},"type":"ObjectUpdate","updates":[["currentScene",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[354,39],"start":[354,35]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[354,45],"start":[354,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[354,45],"start":[354,40]}},"type":"Var","value":{"identifier":"scene","sourcePos":[353,1]}},"type":"App"}]]},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[354,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[354,49]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[353,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"setCurrentScene"},{"annotation":{"meta":null,"sourceSpan":{"end":[304,17],"start":[301,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[304,17],"start":[301,1]}},"argument":"_state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[305,35],"start":[305,26]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[305,35],"start":[305,31]}},"type":"Var","value":{"identifier":"unit","moduleName":["Data","Unit"]}},"type":"App"},"type":"Abs"},"identifier":"runStableEngine"},{"annotation":{"meta":null,"sourceSpan":{"end":[324,20],"start":[321,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[324,20],"start":[321,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[326,30],"start":[326,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[326,20],"start":[326,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[326,30],"start":[326,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[326,30],"start":[326,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[325,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[326,30],"start":[326,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[326,30],"start":[326,3]}},"argument":"state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[327,33],"start":[327,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[327,16],"start":[327,10]}},"type":"Var","value":{"identifier":"isJust","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[327,33],"start":[327,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[327,33],"start":[327,17]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[327,22],"start":[327,17]}},"type":"Var","value":{"identifier":"state","sourcePos":[326,3]}},"fieldName":"transition","type":"Accessor"},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"isTransitioning"},{"annotation":{"meta":null,"sourceSpan":{"end":[335,27],"start":[332,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[335,27],"start":[332,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[337,30],"start":[337,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[337,20],"start":[337,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[337,30],"start":[337,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[337,30],"start":[337,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[336,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[337,30],"start":[337,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[337,30],"start":[337,3]}},"argument":"state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[338,41],"start":[338,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[338,24],"start":[338,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[338,24],"start":[338,14]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[338,24],"start":[338,14]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},"fieldName":"progress","type":"Accessor"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[338,41],"start":[338,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[338,41],"start":[338,25]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[338,30],"start":[338,25]}},"type":"Var","value":{"identifier":"state","sourcePos":[337,3]}},"fieldName":"transition","type":"Accessor"},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"getTransitionProgress"},{"annotation":{"meta":null,"sourceSpan":{"end":[315,45],"start":[312,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[315,45],"start":[312,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[317,30],"start":[317,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[317,20],"start":[317,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[317,30],"start":[317,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[317,30],"start":[317,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[316,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[317,30],"start":[317,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[317,30],"start":[317,3]}},"argument":"state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[318,26],"start":[318,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[318,26],"start":[318,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[318,13],"start":[318,8]}},"type":"Var","value":{"identifier":"state","sourcePos":[317,3]}},"fieldName":"currentScene","type":"Accessor"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"getCurrentScene"},{"annotation":{"meta":null,"sourceSpan":{"end":[136,41],"start":[136,1]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[137,47],"start":[137,26]}},"type":"Var","value":{"identifier":"ticksForDuration","moduleName":["PSD3","Transition","Tick"]}},"annotation":{"meta":null,"sourceSpan":{"end":[137,52],"start":[137,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[137,52],"start":[137,48]}},"type":"Literal","value":{"literalType":"IntLiteral","value":2000}},"type":"App"},"identifier":"defaultTransitionDelta"},{"annotation":{"meta":null,"sourceSpan":{"end":[152,31],"start":[149,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[152,31],"start":[149,1]}},"argument":"adapter","body":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[153,31],"start":[153,24]}},"type":"Var","value":{"identifier":"new","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[158,4],"start":[153,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[158,4],"start":[154,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["adapter",{"annotation":{"meta":null,"sourceSpan":{"end":[154,12],"start":[154,5]}},"type":"Var","value":{"identifier":"adapter","sourcePos":[153,1]}}],["currentScene",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[155,26],"start":[155,19]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}],["transition",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[156,24],"start":[156,17]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}],["transitionDelta",{"annotation":{"meta":null,"sourceSpan":{"end":[157,44],"start":[157,22]}},"type":"Var","value":{"identifier":"defaultTransitionDelta","moduleName":["PSD3","Scene","Engine"]}}]]}},"type":"App"},"type":"Abs"},"identifier":"createEngine"},{"annotation":{"meta":null,"sourceSpan":{"end":[266,17],"start":[261,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[266,17],"start":[261,1]}},"argument":"t","body":{"annotation":{"meta":null,"sourceSpan":{"end":[266,17],"start":[261,1]}},"argument":"engineRef","body":{"annotation":{"meta":null,"sourceSpan":{"end":[266,17],"start":[261,1]}},"argument":"state","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[269,50],"start":[269,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[269,32],"start":[269,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[269,32],"start":[269,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[269,8],"start":[269,3]}},"type":"Var","value":{"identifier":"state","sourcePos":[267,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"updatePositions","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[269,50],"start":[269,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[269,50],"start":[269,33]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[269,34],"start":[269,33]}},"type":"Var","value":{"identifier":"t","sourcePos":[267,1]}},"fieldName":"targetPositions","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[269,50],"start":[269,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[269,50],"start":[269,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[272,34],"start":[272,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[272,34],"start":[272,12]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[272,34],"start":[272,12]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[272,17],"start":[272,12]}},"type":"Var","value":{"identifier":"state","sourcePos":[267,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"getNodes","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[272,34],"start":[272,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[272,34],"start":[272,3]}},"argument":"nodes","body":{"annotation":{"meta":null,"sourceSpan":{"end":[273,45],"start":[273,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[273,45],"start":[273,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[273,39],"start":[273,15]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[273,39],"start":[273,15]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[273,16],"start":[273,15]}},"type":"Var","value":{"identifier":"t","sourcePos":[267,1]}},"fieldName":"targetScene","type":"Accessor"},"fieldName":"finalRules","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[273,45],"start":[273,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[273,45],"start":[273,40]}},"type":"Var","value":{"identifier":"nodes","sourcePos":[272,3]}},"type":"App"},"identifier":"rules"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[274,40],"start":[274,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[274,8],"start":[274,3]}},"type":"Var","value":{"identifier":"state","sourcePos":[267,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"applyRulesInPlace","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[274,40],"start":[274,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[274,40],"start":[274,35]}},"type":"Var","value":{"identifier":"rules","sourcePos":[273,7]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[274,40],"start":[274,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[274,40],"start":[274,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[277,35],"start":[277,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[277,35],"start":[277,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[277,35],"start":[277,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[277,8],"start":[277,3]}},"type":"Var","value":{"identifier":"state","sourcePos":[267,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"reinitializeForces","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[277,35],"start":[277,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[277,35],"start":[277,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[282,30],"start":[280,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[282,30],"start":[280,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[281,18],"start":[281,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Physics","moduleName":["PSD3","Scene","Types"]},"typeName":{"identifier":"EngineMode","moduleName":["PSD3","Scene","Types"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[281,42],"start":[281,22]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[281,42],"start":[281,22]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[281,27],"start":[281,22]}},"type":"Var","value":{"identifier":"state","sourcePos":[267,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"reheat","type":"Accessor"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[282,17],"start":[282,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Static","moduleName":["PSD3","Scene","Types"]},"typeName":{"identifier":"EngineMode","moduleName":["PSD3","Scene","Types"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[282,30],"start":[282,21]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[282,30],"start":[282,26]}},"type":"Var","value":{"identifier":"unit","moduleName":["Data","Unit"]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[280,32],"start":[280,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[280,32],"start":[280,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[280,9],"start":[280,8]}},"type":"Var","value":{"identifier":"t","sourcePos":[267,1]}},"fieldName":"targetScene","type":"Accessor"},"fieldName":"stableMode","type":"Accessor"}],"type":"Case"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[282,30],"start":[280,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[282,30],"start":[280,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[285,12],"start":[285,3]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[290,6],"start":[285,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[289,10],"start":[286,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[291,14],"start":[267,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[286,12],"start":[286,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[267,1]}},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[289,10],"start":[286,7]}},"copy":["adapter","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[267,1]}},"type":"ObjectUpdate","updates":[["currentScene",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[287,30],"start":[287,26]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[287,44],"start":[287,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[287,44],"start":[287,31]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[287,32],"start":[287,31]}},"type":"Var","value":{"identifier":"t","sourcePos":[267,1]}},"fieldName":"targetScene","type":"Accessor"},"type":"App"}],["transition",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[288,31],"start":[288,24]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[291,14],"start":[285,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[291,14],"start":[291,5]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[267,1]}},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"completeTransition"},{"annotation":{"meta":null,"sourceSpan":{"end":[242,17],"start":[237,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[242,17],"start":[237,1]}},"argument":"t","body":{"annotation":{"meta":null,"sourceSpan":{"end":[242,17],"start":[237,1]}},"argument":"engineRef","body":{"annotation":{"meta":null,"sourceSpan":{"end":[242,17],"start":[237,1]}},"argument":"state","body":{"annotation":{"meta":null,"sourceSpan":{"end":[244,65],"start":[244,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[244,65],"start":[244,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"min","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[244,28],"start":[244,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[244,28],"start":[244,25]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[244,65],"start":[244,21]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[244,64],"start":[244,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[244,40],"start":[244,30]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[244,31],"start":[244,30]}},"type":"Var","value":{"identifier":"t","sourcePos":[243,1]}},"fieldName":"progress","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[244,64],"start":[244,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[244,64],"start":[244,43]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[244,48],"start":[244,43]}},"type":"Var","value":{"identifier":"state","sourcePos":[243,1]}},"fieldName":"transitionDelta","type":"Accessor"},"type":"App"},"type":"App"},"identifier":"newProgress"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[246,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[246,3]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[247,28],"start":[247,10]}},"type":"Var","value":{"identifier":"completeTransition","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[247,30],"start":[247,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[247,30],"start":[247,29]}},"type":"Var","value":{"identifier":"t","sourcePos":[243,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[247,40],"start":[247,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[247,40],"start":[247,31]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[243,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[247,46],"start":[247,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[247,46],"start":[247,41]}},"type":"Var","value":{"identifier":"state","sourcePos":[243,1]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[246,3]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[250,58],"start":[250,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[250,58],"start":[250,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[250,46],"start":[250,27]}},"type":"Var","value":{"identifier":"easeInOutCubic","moduleName":["PSD3","Transition","Tick"]}},"annotation":{"meta":null,"sourceSpan":{"end":[250,58],"start":[250,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[250,58],"start":[250,47]}},"type":"Var","value":{"identifier":"newProgress","sourcePos":[244,7]}},"type":"App"},"identifier":"easedProgress"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[253,90],"start":[253,7]}},"argument":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[253,41],"start":[253,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[253,41],"start":[253,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[253,12],"start":[253,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[243,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"interpolatePositions","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[253,58],"start":[253,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[253,58],"start":[253,42]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[253,43],"start":[253,42]}},"type":"Var","value":{"identifier":"t","sourcePos":[243,1]}},"fieldName":"startPositions","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[253,76],"start":[253,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[253,76],"start":[253,59]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[253,60],"start":[253,59]}},"type":"Var","value":{"identifier":"t","sourcePos":[243,1]}},"fieldName":"targetPositions","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[253,90],"start":[253,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[253,90],"start":[253,77]}},"type":"Var","value":{"identifier":"easedProgress","sourcePos":[250,11]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[253,90],"start":[253,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[253,90],"start":[253,7]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[256,16],"start":[256,7]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[257,69],"start":[256,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[257,68],"start":[257,10]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[243,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[257,15],"start":[257,10]}},"type":"Var","value":{"identifier":"state","sourcePos":[243,1]}},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[257,68],"start":[257,10]}},"copy":["adapter","currentScene","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[243,1]}},"type":"ObjectUpdate","updates":[["transition",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[257,35],"start":[257,31]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[257,66],"start":[257,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[257,65],"start":[257,37]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[243,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[257,38],"start":[257,37]}},"type":"Var","value":{"identifier":"t","sourcePos":[243,1]}},"identifier":"v1"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[257,65],"start":[257,37]}},"copy":["startPositions","targetPositions","targetScene"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v1","sourcePos":[243,1]}},"type":"ObjectUpdate","updates":[["progress",{"annotation":{"meta":null,"sourceSpan":{"end":[257,63],"start":[257,52]}},"type":"Var","value":{"identifier":"newProgress","sourcePos":[244,7]}}]]},"type":"Let"},"type":"App"}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[256,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[258,18],"start":[258,9]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[243,1]}},"type":"App"},"type":"Abs"},"type":"App"},"type":"Let"},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[246,24],"start":[246,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,17],"start":[246,6]}},"type":"Var","value":{"identifier":"newProgress","sourcePos":[244,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[246,24],"start":[246,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,24],"start":[246,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"runInterpolationEngine"},{"annotation":{"meta":null,"sourceSpan":{"end":[219,20],"start":[216,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[219,20],"start":[216,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[221,30],"start":[221,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[221,20],"start":[221,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[221,30],"start":[221,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[221,30],"start":[221,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[220,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[221,30],"start":[221,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[221,30],"start":[221,3]}},"argument":"state","body":{"annotation":{"meta":null,"sourceSpan":{"end":[230,17],"start":[223,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[224,11],"start":[224,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[224,11],"start":[224,10]}},"binderType":"VarBinder","identifier":"t"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[225,47],"start":[225,7]}},"argument":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[225,29],"start":[225,7]}},"type":"Var","value":{"identifier":"runInterpolationEngine","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[225,31],"start":[225,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[225,31],"start":[225,30]}},"type":"Var","value":{"identifier":"t","sourcePos":[224,10]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[225,41],"start":[225,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[225,41],"start":[225,32]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[220,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[225,47],"start":[225,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[225,47],"start":[225,42]}},"type":"Var","value":{"identifier":"state","sourcePos":[221,3]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[225,47],"start":[225,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[225,47],"start":[225,7]}},"argument":"$__unused","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[226,16],"start":[226,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[226,16],"start":[226,12]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[228,12],"start":[228,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[229,28],"start":[229,7]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[229,22],"start":[229,7]}},"type":"Var","value":{"identifier":"runStableEngine","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[229,28],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[229,28],"start":[229,23]}},"type":"Var","value":{"identifier":"state","sourcePos":[221,3]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[229,28],"start":[229,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[229,28],"start":[229,7]}},"argument":"$__unused","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Scene","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[230,17],"start":[230,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[230,17],"start":[230,12]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[223,24],"start":[223,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[223,13],"start":[223,8]}},"type":"Var","value":{"identifier":"state","sourcePos":[221,3]}},"fieldName":"transition","type":"Accessor"}],"type":"Case"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"tick"}],"exports":["createEngine","transitionTo","tick","getCurrentScene","isTransitioning","getTransitionProgress","setCurrentScene","defaultTransitionDelta"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Control","Applicative"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Control","Bind"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Data","Function"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Data","Functor"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Data","Maybe"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Data","Unit"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Effect"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Effect","Ref"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["PSD3","Scene","Engine"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["PSD3","Scene","Types"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["PSD3","Transition","Tick"]},{"annotation":{"meta":null,"sourceSpan":{"end":[49,15],"start":[49,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[354,58],"start":[27,1]}},"moduleName":["Prim"]}],"moduleName":["PSD3","Scene","Engine"],"modulePath":"../purescript-psd3-simulation/src/PSD3/Scene/Engine.purs","reExports":{"PSD3.Scene.Types":["Physics","Static"]},"sourceSpan":{"end":[354,58],"start":[27,1]}}