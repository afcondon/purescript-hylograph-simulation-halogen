{"builtWith":"0.15.15","comments":[{"LineComment":" | Scene Engine"},{"LineComment":" |"},{"LineComment":" | Tick-based scene orchestration with adapter pattern."},{"LineComment":" |"},{"LineComment":" | The engine manages transitions between scenes using a three-phase lifecycle:"},{"LineComment":" | 1. Initialize: Apply init rules to prepare starting state"},{"LineComment":" | 2. Transition: Interpolate positions from start to target"},{"LineComment":" | 3. Finalize: Apply final rules and enter stable mode"},{"LineComment":" |"},{"LineComment":" | The engine is generic over the node type. Apps provide an adapter"},{"LineComment":" | record with functions that interact with their specific simulation kernel."},{"LineComment":" |"},{"LineComment":" | Example usage:"},{"LineComment":" | ```purescript"},{"LineComment":" | -- Create adapter for your kernel (D3, WASM, etc.)"},{"LineComment":" | adapter = mkAdapter mySimulation"},{"LineComment":" |"},{"LineComment":" | -- Create engine"},{"LineComment":" | engineRef <- createEngine adapter"},{"LineComment":" |"},{"LineComment":" | -- Transition to a scene"},{"LineComment":" | transitionTo treeFormScene engineRef"},{"LineComment":" |"},{"LineComment":" | -- Call tick from your simulation's tick handler"},{"LineComment":" | Sim.onTick (\\_ -> tick engineRef) mySimulation"},{"LineComment":" | ```"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[181,30],"start":[181,3]}},"type":"Var","value":{"identifier":"bind","moduleName":["Control","Bind"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[181,30],"start":[181,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bindEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"bind"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[185,19],"start":[185,15]}},"type":"Var","value":{"identifier":"pure","moduleName":["Control","Applicative"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[185,24],"start":[185,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"applicativeEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"pure"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[188,60],"start":[188,7]}},"type":"Var","value":{"identifier":"discard","moduleName":["Control","Bind"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[188,60],"start":[188,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discardUnit","moduleName":["Control","Bind"]}},"type":"App"},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[188,60],"start":[188,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bindEffect","moduleName":["Effect"]}},"type":"App"},"identifier":"discard"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[340,13],"start":[340,10]}},"type":"Var","value":{"identifier":"map","moduleName":["Data","Functor"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[340,24],"start":[340,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"functorMaybe","moduleName":["Data","Maybe"]}},"type":"App"},"identifier":"map"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[246,24],"start":[246,21]}},"type":"Var","value":{"identifier":"min","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[246,28],"start":[246,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"min"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[246,42],"start":[246,41]}},"type":"Var","value":{"identifier":"add","moduleName":["Data","Semiring"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[246,64],"start":[246,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"semiringNumber","moduleName":["Data","Semiring"]}},"type":"App"},"identifier":"add"},{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[248,20],"start":[248,18]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["Data","Ord"]}},"annotation":{"meta":{"metaType":"IsSyntheticApp"},"sourceSpan":{"end":[248,24],"start":[248,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"ordNumber","moduleName":["Data","Ord"]}},"type":"App"},"identifier":"greaterThanOrEq"},{"annotation":{"meta":null,"sourceSpan":{"end":[179,17],"start":[175,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[179,17],"start":[175,1]}},"argument":"targetScene","body":{"annotation":{"meta":null,"sourceSpan":{"end":[179,17],"start":[175,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[181,30],"start":[181,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[181,20],"start":[181,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[181,30],"start":[181,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[181,30],"start":[181,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[180,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[181,30],"start":[181,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[181,30],"start":[181,3]}},"argument":"state","body":{"annotation":{"meta":null,"sourceSpan":{"end":[211,27],"start":[184,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[185,11],"start":[185,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[185,11],"start":[185,10]}},"binderType":"NullBinder"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[185,24],"start":[185,15]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[185,24],"start":[185,20]}},"type":"Var","value":{"identifier":"unit","moduleName":["Data","Unit"]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[186,12],"start":[186,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[188,60],"start":[188,7]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[188,38],"start":[188,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[188,38],"start":[188,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[188,12],"start":[188,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[181,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"applyRulesInPlace","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[188,60],"start":[188,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[188,60],"start":[188,39]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[188,50],"start":[188,39]}},"type":"Var","value":{"identifier":"targetScene","sourcePos":[180,1]}},"fieldName":"initRules","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[188,60],"start":[188,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[188,60],"start":[188,7]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[191,47],"start":[191,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[191,47],"start":[191,25]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[191,47],"start":[191,25]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[191,30],"start":[191,25]}},"type":"Var","value":{"identifier":"state","sourcePos":[181,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"getNodes","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[191,47],"start":[191,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[191,47],"start":[191,7]}},"argument":"nodesAfterInit","body":{"annotation":{"meta":null,"sourceSpan":{"end":[192,73],"start":[192,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[192,73],"start":[192,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[192,58],"start":[192,28]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[192,58],"start":[192,28]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[192,33],"start":[192,28]}},"type":"Var","value":{"identifier":"state","sourcePos":[181,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"capturePositions","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[192,73],"start":[192,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[192,73],"start":[192,59]}},"type":"Var","value":{"identifier":"nodesAfterInit","sourcePos":[191,7]}},"type":"App"},"identifier":"startPositions"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[195,62],"start":[195,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[195,62],"start":[195,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[195,47],"start":[195,29]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[195,40],"start":[195,29]}},"type":"Var","value":{"identifier":"targetScene","sourcePos":[180,1]}},"fieldName":"layout","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[195,62],"start":[195,29]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[195,62],"start":[195,48]}},"type":"Var","value":{"identifier":"nodesAfterInit","sourcePos":[191,7]}},"type":"App"},"identifier":"targetPositions"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[208,18],"start":[198,7]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[198,16],"start":[198,7]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[207,10],"start":[198,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[206,14],"start":[199,11]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[211,27],"start":[180,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[199,16],"start":[199,11]}},"type":"Var","value":{"identifier":"state","sourcePos":[181,3]}},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[206,14],"start":[199,11]}},"copy":["adapter","currentScene","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[180,1]}},"type":"ObjectUpdate","updates":[["transition",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[200,32],"start":[200,28]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[205,18],"start":[200,28]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[205,18],"start":[201,17]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["targetScene",{"annotation":{"meta":null,"sourceSpan":{"end":[201,30],"start":[201,19]}},"type":"Var","value":{"identifier":"targetScene","sourcePos":[180,1]}}],["startPositions",{"annotation":{"meta":null,"sourceSpan":{"end":[202,33],"start":[202,19]}},"type":"Var","value":{"identifier":"startPositions","sourcePos":[192,11]}}],["targetPositions",{"annotation":{"meta":null,"sourceSpan":{"end":[203,34],"start":[203,19]}},"type":"Var","value":{"identifier":"targetPositions","sourcePos":[195,11]}}],["progress",{"annotation":{"meta":null,"sourceSpan":{"end":[204,32],"start":[204,29]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":0}}]]}},"type":"App"}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[208,18],"start":[198,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[208,18],"start":[208,9]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[180,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[208,18],"start":[198,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[208,18],"start":[198,7]}},"argument":"$__unused","body":{"annotation":{"meta":null,"sourceSpan":{"end":[211,27],"start":[211,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[211,27],"start":[211,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[211,12],"start":[211,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[181,3]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"reheat","type":"Accessor"},"type":"Abs"},"type":"App"},"type":"Let"},"type":"Let"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[184,24],"start":[184,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[184,13],"start":[184,8]}},"type":"Var","value":{"identifier":"state","sourcePos":[181,3]}},"fieldName":"transition","type":"Accessor"}],"type":"Case"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"transitionTo"},{"annotation":{"meta":null,"sourceSpan":{"end":[354,17],"start":[350,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[354,17],"start":[350,1]}},"argument":"scene","body":{"annotation":{"meta":null,"sourceSpan":{"end":[354,17],"start":[350,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[356,14],"start":[356,3]}},"type":"Var","value":{"identifier":"modify_","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[356,48],"start":[356,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[356,47],"start":[356,16]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[356,47],"start":[356,16]}},"copy":["adapter","transition","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},"type":"ObjectUpdate","updates":[["currentScene",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[356,39],"start":[356,35]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[356,45],"start":[356,35]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[356,45],"start":[356,40]}},"type":"Var","value":{"identifier":"scene","sourcePos":[355,1]}},"type":"App"}]]},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[356,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[356,49]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[355,1]}},"type":"App"},"type":"Abs"},"type":"Abs"},"identifier":"setCurrentScene"},{"annotation":{"meta":null,"sourceSpan":{"end":[306,17],"start":[303,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[306,17],"start":[303,1]}},"argument":"_state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[307,35],"start":[307,26]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[307,35],"start":[307,31]}},"type":"Var","value":{"identifier":"unit","moduleName":["Data","Unit"]}},"type":"App"},"type":"Abs"},"identifier":"runStableEngine"},{"annotation":{"meta":null,"sourceSpan":{"end":[326,20],"start":[323,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[326,20],"start":[323,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[328,30],"start":[328,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[328,20],"start":[328,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[328,30],"start":[328,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[328,30],"start":[328,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[327,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[328,30],"start":[328,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[328,30],"start":[328,3]}},"argument":"state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[329,33],"start":[329,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[329,16],"start":[329,10]}},"type":"Var","value":{"identifier":"isJust","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[329,33],"start":[329,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[329,33],"start":[329,17]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[329,22],"start":[329,17]}},"type":"Var","value":{"identifier":"state","sourcePos":[328,3]}},"fieldName":"transition","type":"Accessor"},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"isTransitioning"},{"annotation":{"meta":null,"sourceSpan":{"end":[337,27],"start":[334,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[337,27],"start":[334,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[339,30],"start":[339,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[339,20],"start":[339,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[339,30],"start":[339,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[339,30],"start":[339,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[338,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[339,30],"start":[339,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[339,30],"start":[339,3]}},"argument":"state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[340,41],"start":[340,3]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"map","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[340,24],"start":[340,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[340,24],"start":[340,14]}},"argument":"v","body":{"annotation":{"meta":null,"sourceSpan":{"end":[340,24],"start":[340,14]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[0,0]}},"fieldName":"progress","type":"Accessor"},"type":"Abs"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[340,41],"start":[340,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[340,41],"start":[340,25]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[340,30],"start":[340,25]}},"type":"Var","value":{"identifier":"state","sourcePos":[339,3]}},"fieldName":"transition","type":"Accessor"},"type":"App"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"getTransitionProgress"},{"annotation":{"meta":null,"sourceSpan":{"end":[317,45],"start":[314,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[317,45],"start":[314,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[319,30],"start":[319,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[319,20],"start":[319,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[319,30],"start":[319,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[319,30],"start":[319,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[318,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[319,30],"start":[319,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[319,30],"start":[319,3]}},"argument":"state","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[320,26],"start":[320,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[320,26],"start":[320,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[320,13],"start":[320,8]}},"type":"Var","value":{"identifier":"state","sourcePos":[319,3]}},"fieldName":"currentScene","type":"Accessor"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"getCurrentScene"},{"annotation":{"meta":null,"sourceSpan":{"end":[138,41],"start":[138,1]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[139,47],"start":[139,26]}},"type":"Var","value":{"identifier":"ticksForDuration","moduleName":["PSD3","Simulation","Core","Tick"]}},"annotation":{"meta":null,"sourceSpan":{"end":[139,52],"start":[139,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[139,52],"start":[139,48]}},"type":"Literal","value":{"literalType":"IntLiteral","value":2000}},"type":"App"},"identifier":"defaultTransitionDelta"},{"annotation":{"meta":null,"sourceSpan":{"end":[154,31],"start":[151,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[154,31],"start":[151,1]}},"argument":"adapter","body":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[155,31],"start":[155,24]}},"type":"Var","value":{"identifier":"new","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[160,4],"start":[155,24]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[160,4],"start":[156,3]}},"type":"Literal","value":{"literalType":"ObjectLiteral","value":[["adapter",{"annotation":{"meta":null,"sourceSpan":{"end":[156,12],"start":[156,5]}},"type":"Var","value":{"identifier":"adapter","sourcePos":[155,1]}}],["currentScene",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[157,26],"start":[157,19]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}],["transition",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[158,24],"start":[158,17]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}],["transitionDelta",{"annotation":{"meta":null,"sourceSpan":{"end":[159,44],"start":[159,22]}},"type":"Var","value":{"identifier":"defaultTransitionDelta","moduleName":["PSD3","Simulation","Core","Engine"]}}]]}},"type":"App"},"type":"Abs"},"identifier":"createEngine"},{"annotation":{"meta":null,"sourceSpan":{"end":[268,17],"start":[263,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[268,17],"start":[263,1]}},"argument":"t","body":{"annotation":{"meta":null,"sourceSpan":{"end":[268,17],"start":[263,1]}},"argument":"engineRef","body":{"annotation":{"meta":null,"sourceSpan":{"end":[268,17],"start":[263,1]}},"argument":"state","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[271,50],"start":[271,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[271,32],"start":[271,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[271,32],"start":[271,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[271,8],"start":[271,3]}},"type":"Var","value":{"identifier":"state","sourcePos":[269,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"updatePositions","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[271,50],"start":[271,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[271,50],"start":[271,33]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[271,34],"start":[271,33]}},"type":"Var","value":{"identifier":"t","sourcePos":[269,1]}},"fieldName":"targetPositions","type":"Accessor"},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[271,50],"start":[271,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[271,50],"start":[271,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,12]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,12]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[274,17],"start":[274,12]}},"type":"Var","value":{"identifier":"state","sourcePos":[269,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"getNodes","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[274,34],"start":[274,3]}},"argument":"nodes","body":{"annotation":{"meta":null,"sourceSpan":{"end":[275,45],"start":[275,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[275,45],"start":[275,7]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[275,39],"start":[275,15]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[275,39],"start":[275,15]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[275,16],"start":[275,15]}},"type":"Var","value":{"identifier":"t","sourcePos":[269,1]}},"fieldName":"targetScene","type":"Accessor"},"fieldName":"finalRules","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[275,45],"start":[275,15]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[275,45],"start":[275,40]}},"type":"Var","value":{"identifier":"nodes","sourcePos":[274,3]}},"type":"App"},"identifier":"rules"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[276,40],"start":[276,3]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[276,34],"start":[276,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[276,34],"start":[276,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[276,8],"start":[276,3]}},"type":"Var","value":{"identifier":"state","sourcePos":[269,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"applyRulesInPlace","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[276,40],"start":[276,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,40],"start":[276,35]}},"type":"Var","value":{"identifier":"rules","sourcePos":[275,7]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[276,40],"start":[276,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[276,40],"start":[276,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[279,35],"start":[279,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[279,35],"start":[279,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[279,35],"start":[279,3]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[279,8],"start":[279,3]}},"type":"Var","value":{"identifier":"state","sourcePos":[269,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"reinitializeForces","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[279,35],"start":[279,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[279,35],"start":[279,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[284,30],"start":[282,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[284,30],"start":[282,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[283,18],"start":[283,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Physics","moduleName":["PSD3","Simulation","Core","Types"]},"typeName":{"identifier":"EngineMode","moduleName":["PSD3","Simulation","Core","Types"]}}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[283,42],"start":[283,22]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[283,42],"start":[283,22]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[283,27],"start":[283,22]}},"type":"Var","value":{"identifier":"state","sourcePos":[269,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"reheat","type":"Accessor"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[284,17],"start":[284,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Static","moduleName":["PSD3","Simulation","Core","Types"]},"typeName":{"identifier":"EngineMode","moduleName":["PSD3","Simulation","Core","Types"]}}],"expression":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[284,30],"start":[284,21]}},"argument":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[284,30],"start":[284,26]}},"type":"Var","value":{"identifier":"unit","moduleName":["Data","Unit"]}},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[282,32],"start":[282,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[282,32],"start":[282,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[282,9],"start":[282,8]}},"type":"Var","value":{"identifier":"t","sourcePos":[269,1]}},"fieldName":"targetScene","type":"Accessor"},"fieldName":"stableMode","type":"Accessor"}],"type":"Case"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[284,30],"start":[282,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[284,30],"start":[282,3]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[287,12],"start":[287,3]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[292,6],"start":[287,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[291,10],"start":[288,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[293,14],"start":[269,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[288,12],"start":[288,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[269,1]}},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[291,10],"start":[288,7]}},"copy":["adapter","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[269,1]}},"type":"ObjectUpdate","updates":[["currentScene",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[289,30],"start":[289,26]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[289,44],"start":[289,26]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[289,44],"start":[289,31]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[289,32],"start":[289,31]}},"type":"Var","value":{"identifier":"t","sourcePos":[269,1]}},"fieldName":"targetScene","type":"Accessor"},"type":"App"}],["transition",{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[290,31],"start":[290,24]}},"type":"Var","value":{"identifier":"Nothing","moduleName":["Data","Maybe"]}}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[293,14],"start":[287,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[293,14],"start":[293,5]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[269,1]}},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Let"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"App"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"completeTransition"},{"annotation":{"meta":null,"sourceSpan":{"end":[244,17],"start":[239,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[244,17],"start":[239,1]}},"argument":"t","body":{"annotation":{"meta":null,"sourceSpan":{"end":[244,17],"start":[239,1]}},"argument":"engineRef","body":{"annotation":{"meta":null,"sourceSpan":{"end":[244,17],"start":[239,1]}},"argument":"state","body":{"annotation":{"meta":null,"sourceSpan":{"end":[246,65],"start":[246,3]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[246,65],"start":[246,7]}},"bindType":"NonRec","expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"min","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[246,28],"start":[246,21]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,28],"start":[246,25]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[246,65],"start":[246,21]}},"argument":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"add","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[246,64],"start":[246,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,40],"start":[246,30]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[246,31],"start":[246,30]}},"type":"Var","value":{"identifier":"t","sourcePos":[245,1]}},"fieldName":"progress","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[246,64],"start":[246,30]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[246,64],"start":[246,43]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[246,48],"start":[246,43]}},"type":"Var","value":{"identifier":"state","sourcePos":[245,1]}},"fieldName":"transitionDelta","type":"Accessor"},"type":"App"},"type":"App"},"identifier":"newProgress"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[248,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[248,3]}},"binderType":"LiteralBinder","literal":{"literalType":"BooleanLiteral","value":true}}],"expression":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[249,28],"start":[249,10]}},"type":"Var","value":{"identifier":"completeTransition","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[249,30],"start":[249,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[249,30],"start":[249,29]}},"type":"Var","value":{"identifier":"t","sourcePos":[245,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[249,40],"start":[249,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[249,40],"start":[249,31]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[245,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[249,46],"start":[249,10]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[249,46],"start":[249,41]}},"type":"Var","value":{"identifier":"state","sourcePos":[245,1]}},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[248,3]}},"binderType":"NullBinder"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[252,58],"start":[252,7]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[252,58],"start":[252,11]}},"bindType":"NonRec","expression":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[252,46],"start":[252,27]}},"type":"Var","value":{"identifier":"easeInOutCubic","moduleName":["PSD3","Simulation","Core","Tick"]}},"annotation":{"meta":null,"sourceSpan":{"end":[252,58],"start":[252,27]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[252,58],"start":[252,47]}},"type":"Var","value":{"identifier":"newProgress","sourcePos":[246,7]}},"type":"App"},"identifier":"easedProgress"}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[255,90],"start":[255,7]}},"argument":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[255,41],"start":[255,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[255,41],"start":[255,7]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[255,12],"start":[255,7]}},"type":"Var","value":{"identifier":"state","sourcePos":[245,1]}},"fieldName":"adapter","type":"Accessor"},"fieldName":"interpolatePositions","type":"Accessor"},"annotation":{"meta":null,"sourceSpan":{"end":[255,58],"start":[255,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[255,58],"start":[255,42]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[255,43],"start":[255,42]}},"type":"Var","value":{"identifier":"t","sourcePos":[245,1]}},"fieldName":"startPositions","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[255,76],"start":[255,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[255,76],"start":[255,59]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[255,60],"start":[255,59]}},"type":"Var","value":{"identifier":"t","sourcePos":[245,1]}},"fieldName":"targetPositions","type":"Accessor"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[255,90],"start":[255,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[255,90],"start":[255,77]}},"type":"Var","value":{"identifier":"easedProgress","sourcePos":[252,11]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[255,90],"start":[255,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[255,90],"start":[255,7]}},"argument":"$__unused","body":{"abstraction":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[258,16],"start":[258,7]}},"type":"Var","value":{"identifier":"write","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[259,69],"start":[258,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[259,68],"start":[259,10]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[245,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[259,15],"start":[259,10]}},"type":"Var","value":{"identifier":"state","sourcePos":[245,1]}},"identifier":"v"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[259,68],"start":[259,10]}},"copy":["adapter","currentScene","transitionDelta"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v","sourcePos":[245,1]}},"type":"ObjectUpdate","updates":[["transition",{"abstraction":{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[259,35],"start":[259,31]}},"type":"Var","value":{"identifier":"Just","moduleName":["Data","Maybe"]}},"annotation":{"meta":null,"sourceSpan":{"end":[259,66],"start":[259,31]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[259,65],"start":[259,37]}},"binds":[{"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[245,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[259,38],"start":[259,37]}},"type":"Var","value":{"identifier":"t","sourcePos":[245,1]}},"identifier":"v1"}],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[259,65],"start":[259,37]}},"copy":["startPositions","targetPositions","targetScene"],"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"v1","sourcePos":[245,1]}},"type":"ObjectUpdate","updates":[["progress",{"annotation":{"meta":null,"sourceSpan":{"end":[259,63],"start":[259,52]}},"type":"Var","value":{"identifier":"newProgress","sourcePos":[246,7]}}]]},"type":"Let"},"type":"App"}]]},"type":"Let"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[258,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[260,18],"start":[260,9]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[245,1]}},"type":"App"},"type":"Abs"},"type":"App"},"type":"Let"},"isGuarded":false}],"caseExpressions":[{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"greaterThanOrEq","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[248,24],"start":[248,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[248,17],"start":[248,6]}},"type":"Var","value":{"identifier":"newProgress","sourcePos":[246,7]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[248,24],"start":[248,6]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[248,24],"start":[248,21]}},"type":"Literal","value":{"literalType":"NumberLiteral","value":1}},"type":"App"}],"type":"Case"},"type":"Let"},"type":"Abs"},"type":"Abs"},"type":"Abs"},"identifier":"runInterpolationEngine"},{"annotation":{"meta":null,"sourceSpan":{"end":[221,20],"start":[218,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":null,"sourceSpan":{"end":[221,20],"start":[218,1]}},"argument":"engineRef","body":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"bind","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[223,30],"start":[223,3]}},"argument":{"abstraction":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[223,20],"start":[223,12]}},"type":"Var","value":{"identifier":"read","moduleName":["Effect","Ref"]}},"annotation":{"meta":null,"sourceSpan":{"end":[223,30],"start":[223,12]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[223,30],"start":[223,21]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[222,1]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[223,30],"start":[223,3]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[223,30],"start":[223,3]}},"argument":"state","body":{"annotation":{"meta":null,"sourceSpan":{"end":[232,17],"start":[225,3]}},"caseAlternatives":[{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":["value0"],"metaType":"IsConstructor"},"sourceSpan":{"end":[226,11],"start":[226,5]}},"binderType":"ConstructorBinder","binders":[{"annotation":{"meta":null,"sourceSpan":{"end":[226,11],"start":[226,10]}},"binderType":"VarBinder","identifier":"t"}],"constructorName":{"identifier":"Just","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[227,47],"start":[227,7]}},"argument":{"abstraction":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[227,29],"start":[227,7]}},"type":"Var","value":{"identifier":"runInterpolationEngine","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[227,31],"start":[227,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[227,31],"start":[227,30]}},"type":"Var","value":{"identifier":"t","sourcePos":[226,10]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[227,41],"start":[227,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[227,41],"start":[227,32]}},"type":"Var","value":{"identifier":"engineRef","sourcePos":[222,1]}},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[227,47],"start":[227,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[227,47],"start":[227,42]}},"type":"Var","value":{"identifier":"state","sourcePos":[223,3]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[227,47],"start":[227,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[227,47],"start":[227,7]}},"argument":"$__unused","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[228,16],"start":[228,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[228,16],"start":[228,12]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":true}},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false},{"binders":[{"annotation":{"meta":{"constructorType":"SumType","identifiers":[],"metaType":"IsConstructor"},"sourceSpan":{"end":[230,12],"start":[230,5]}},"binderType":"ConstructorBinder","binders":[],"constructorName":{"identifier":"Nothing","moduleName":["Data","Maybe"]},"typeName":{"identifier":"Maybe","moduleName":["Data","Maybe"]}}],"expression":{"abstraction":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"discard","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[231,28],"start":[231,7]}},"argument":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[231,22],"start":[231,7]}},"type":"Var","value":{"identifier":"runStableEngine","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[231,28],"start":[231,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[231,28],"start":[231,23]}},"type":"Var","value":{"identifier":"state","sourcePos":[223,3]}},"type":"App"},"type":"App"},"annotation":{"meta":null,"sourceSpan":{"end":[231,28],"start":[231,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[231,28],"start":[231,7]}},"argument":"$__unused","body":{"abstraction":{"annotation":{"meta":null,"sourceSpan":{"end":[0,0],"start":[0,0]}},"type":"Var","value":{"identifier":"pure","moduleName":["PSD3","Simulation","Core","Engine"]}},"annotation":{"meta":null,"sourceSpan":{"end":[232,17],"start":[232,7]}},"argument":{"annotation":{"meta":null,"sourceSpan":{"end":[232,17],"start":[232,12]}},"type":"Literal","value":{"literalType":"BooleanLiteral","value":false}},"type":"App"},"type":"Abs"},"type":"App"},"isGuarded":false}],"caseExpressions":[{"annotation":{"meta":null,"sourceSpan":{"end":[225,24],"start":[225,8]}},"expression":{"annotation":{"meta":null,"sourceSpan":{"end":[225,13],"start":[225,8]}},"type":"Var","value":{"identifier":"state","sourcePos":[223,3]}},"fieldName":"transition","type":"Accessor"}],"type":"Case"},"type":"Abs"},"type":"App"},"type":"Abs"},"identifier":"tick"}],"exports":["createEngine","transitionTo","tick","getCurrentScene","isTransitioning","getTransitionProgress","setCurrentScene","defaultTransitionDelta"],"foreign":[],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Control","Applicative"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Control","Bind"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Data","Function"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Data","Functor"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Data","Maybe"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Data","Ord"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Data","Semiring"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Data","Unit"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Effect"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Effect","Ref"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["PSD3","Simulation","Core","Engine"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["PSD3","Simulation","Core","Tick"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["PSD3","Simulation","Core","Types"]},{"annotation":{"meta":null,"sourceSpan":{"end":[49,15],"start":[49,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[356,58],"start":[27,1]}},"moduleName":["Prim"]}],"moduleName":["PSD3","Simulation","Core","Engine"],"modulePath":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Engine.purs","reExports":{"PSD3.Simulation.Core.Types":["Physics","Static"]},"sourceSpan":{"end":[356,58],"start":[27,1]}}