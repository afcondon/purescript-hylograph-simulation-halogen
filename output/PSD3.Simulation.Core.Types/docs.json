{"comments":"Core Types for Simulation\n\nKernel-agnostic type definitions for the scene orchestration system.\nThese types are shared by all kernel implementations (D3, WASM, etc.)\n\nA scene represents a visualization state with:\n- A target layout (where nodes should be)\n- Rules for initialization and finalization\n- A stable mode (physics simulation or static)\n","declarations":[{"children":[],"comments":"A position in 2D space\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["x",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["y",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[31,45],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[31,1]},"title":"Position"},{"children":[],"comments":"Position map: node ID (as string) -> position\nUsed for capturing current positions and specifying targets\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Foreign","Object"],"Object"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"Position"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[35,35],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[35,1]},"title":"PositionMap"},{"children":[],"comments":"A rule that selects nodes and applies a transform.\n\nRules are applied with first-match-wins semantics (like CSS cascade).\nIf multiple rules match a node, only the first one applies.\n\nExample:\n```purescript\npinPackages :: NodeRule MyNode\npinPackages =\n  { name: \"pinPackages\"\n  , select: \\n -> n.nodeType == Package\n  , apply: \\n -> n { fx = notNull n.x, fy = notNull n.y }\n  }\n```\n","info":{"arguments":[["node",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["select",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["apply",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[59,4],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[55,1]},"title":"NodeRule"},{"children":[],"comments":"Scene configuration with three-phase lifecycle.\n\n**Phase 1: Initialize** (`initRules`)\nApplied before transition starts. Use this to set up starting positions,\ne.g., moving tree nodes to the root for a \"grow from root\" animation.\n\n**Phase 2: Transition** (`layout`)\nThe interpolation engine smoothly moves nodes from their current positions\nto the target positions computed by the layout function.\n\n**Phase 3: Finalize** (`finalRules`)\nApplied after transition completes. Use this to set up the stable state,\ne.g., unpinning nodes so forces can take over, or setting gridX/gridY.\n\nExample:\n```purescript\ntreeFormScene :: SceneConfig MyNode\ntreeFormScene =\n  { name: \"TreeForm\"\n  , initRules: [ moveToRootRule ]\n  , layout: \\nodes -> computeTreePositions nodes\n  , finalRules: \\_ -> [ pinAtTreePositionsRule ]\n  , stableMode: Static\n  }\n```\n","info":{"arguments":[["node",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["initRules",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"NodeRule"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["layout",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"PositionMap"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["finalRules",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"NodeRule"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["stableMode",{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"EngineMode"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[123,4],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[108,1]},"title":"SceneConfig"},{"children":[],"comments":"Runtime state during an active transition.\n\nTracks the target scene, start/end positions, and current progress.\nThe interpolation engine updates progress each tick until complete.\nUses tick-based progress (0.0 to 1.0) rather than time-based elapsed.\n","info":{"arguments":[["node",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["targetScene",{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"SceneConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":["startPositions",{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"PositionMap"],"tag":"TypeConstructor"},{"annotation":[],"contents":["targetPositions",{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"PositionMap"],"tag":"TypeConstructor"},{"annotation":[],"contents":["progress",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[139,4],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[134,1]},"title":"TransitionState"},{"children":[{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[70,12],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[70,3]},"title":"Physics"},{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[71,11],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[71,3]},"title":"Static"},{"comments":null,"info":{"declType":"instance","dependencies":[],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Eq"],"Eq"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"EngineMode"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"sourceSpan":{"end":[73,46],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[73,1]},"title":"eqEngineMode"},{"comments":null,"info":{"declType":"instance","dependencies":[],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Show"],"Show"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Simulation","Core","Types"],"EngineMode"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"sourceSpan":{"end":[77,25],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[75,1]},"title":"showEngineMode"}],"comments":"Engine mode determines what happens after a transition completes.\n\n- `Physics`: Force simulation runs, nodes settle via forces\n- `Static`: Nodes stay pinned at their final positions\n","info":{"dataDeclType":"data","declType":"data","roles":[],"typeArguments":[]},"kind":null,"sourceSpan":{"end":[71,11],"name":"../purescript-psd3-simulation-core/src/PSD3/Simulation/Core/Types.purs","start":[69,1]},"title":"EngineMode"}],"name":"PSD3.Simulation.Core.Types","reExports":[]}