{"comments":"PSD3.AST - Abstract Syntax Tree for Visualization Specifications\n\nThis module provides the declarative API for building visualizations.\nAn AST node describes WHAT to render, and interpreters decide HOW to render it.\n\n## Usage\n\n```purescript\nimport PSD3.AST as A\nimport PSD3.Render (runD3, select, renderTree)\n\nmyChart :: A.AST DataPoint\nmyChart =\n  A.named SVG \"svg\" [width 800.0, height 600.0]\n    `A.withChildren`\n      [ A.joinData \"circles\" \"circle\" myData $ \\d ->\n          A.elem Circle [cx d.x, cy d.y, radius 5.0, fill d.color]\n      ]\n\nmain = void $ runD3 do\n  container <- select \"#chart\"\n  renderTree container myChart\n```\n\n## Interpreters\n\nThe same AST can be interpreted multiple ways:\n- `PSD3.Render` - Renders to DOM via D3.js\n- `PSD3.Interpreter.Mermaid` - Generates Mermaid diagram of structure\n- `PSD3.Interpreter.English` - Produces English description (debugging)\n\n## Key Types\n\n- `AST datum` / `Tree datum` - A visualization specification parameterized by datum type\n- `ASTNode datum` / `TreeNode datum` - A node in the AST\n- `PhaseBehavior`, `GUPBehaviors` - GUP phase specifications\n\n## Smart Constructors\n\n- `named` - Create a named element (can be retrieved after rendering)\n- `elem` - Create an anonymous element\n- `withChild`, `withChildren` - Add children to a node\n- `withBehaviors` - Attach zoom, drag, click handlers\n\n## Data Joins\n\n- `joinData` - Simple data join (datum type stays same)\n- `nestedJoin` - Data join with type decomposition\n- `updateJoin` - Data join with enter/update/exit behaviors\n- `updateNestedJoin` - Type decomposition + GUP (recommended for most cases)\n\n","declarations":[{"children":[],"comments":"AST - Abstract Syntax Tree for visualization specifications\n\nAn AST describes the structure of a visualization declaratively.\nIt can be interpreted by multiple backends (D3 DOM, Mermaid, English, etc.)\n\n`AST` and `Tree` are synonyms - use whichever reads better in your code.\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[102,28],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[102,1]},"title":"AST"},{"children":[],"comments":"ASTNode - A node in the visualization AST\n\nContains:\n- `name`: Optional identifier for later retrieval\n- `elemType`: Element type (SVG, Circle, Rect, etc.)\n- `attrs`: Attributes to apply\n- `behaviors`: Attached behaviors (zoom, drag, etc.)\n- `children`: Child nodes\n\n`ASTNode` and `TreeNode` are synonyms.\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"TreeNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[114,36],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[114,1]},"title":"ASTNode"},{"children":[{"comments":null,"info":{"arguments":[{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"TreeNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"declType":"dataConstructor"},"sourceSpan":{"end":[132,9],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[132,3]},"title":"Node"},{"comments":"DataJoin creates N copies of a template tree, one per data item\nThis is how we handle enter/update/exit with the declarative API\n\nThe join itself is a named node in the tree - it represents the COLLECTION\nof elements created from the data.\n","info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["key",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["joinData",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":["template",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[138,9],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[138,3]},"title":"Join"},{"comments":"NestedJoin allows datum type to change during decomposition\nUsed for nested data structures like 2D arrays, arrays of records with arrays, etc.\n\nUses unsafeCoerce internally to handle type changing.\nThis enables patterns like: Array (Array a) → table rows → table cells\n\nSAFETY: The decompose and template functions are provided together by nestedJoin,\nensuring type safety at the call site. Internally we erase the inner type.\n","info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["key",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["joinData",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":["decompose",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["template",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[152,15],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[152,3]},"title":"NestedJoin"},{"comments":"UpdateJoin handles General Update Pattern (GUP) with enter/update/exit\n\nThis variant declaratively specifies behavior for all three phases:\n- Enter: New data items appearing (with optional transition)\n- Update: Existing data items that remain (with optional transition)\n- Exit: Old data items being removed (with optional transition)\n\nThe interpreter handles all the complexity of:\n- Computing the join (determining enter/update/exit sets)\n- Applying the correct template and attributes to each set\n- Running transitions\n- Removing exited elements\n","info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["key",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["joinData",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":["template",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["keyFn",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["behaviors",{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"GUPBehaviors"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[171,15],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[171,3]},"title":"UpdateJoin"},{"comments":"UpdateNestedJoin combines NestedJoin's type decomposition with UpdateJoin's GUP behaviors\n\nThis is the IDEAL variant for most use cases - it allows:\n1. Type transitions (e.g., SceneData -> Array DataPoint)\n2. Full GUP with enter/update/exit behaviors\n\nExample: Container holds scene data, decompose extracts array of items,\neach item gets enter/update/exit transitions.\n\nUses unsafeCoerce internally to handle type changing (same as NestedJoin).\n","info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["key",{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"},{"annotation":[],"contents":["joinData",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":["decompose",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["template",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["behaviors",{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"GUPBehaviors"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[189,21],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[189,3]},"title":"UpdateNestedJoin"},{"comments":"ConditionalRender enables chimeric visualizations by rendering different specs\nbased on data predicates.\n\nThis is the foundation for \"structural exception handling\" - using different\nvisual representations for different structural patterns in the data.\n\nExample: Sankey-Network chimera\n```purescript\nconditionalRender\n  [ { predicate: isCyclicCluster, spec: \\d -> forceNetworkSpec d }\n  , { predicate: isNormalNode, spec: \\d -> sankeyNodeSpec d }\n  ]\n```\n\nThe first matching predicate determines which spec to render.\nIf no predicates match, no element is rendered (could be extended with fallback).\n","info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["cases",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["predicate",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["spec",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[213,22],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[213,3]},"title":"ConditionalRender"},{"comments":"LocalCoordSpace creates a nested coordinate system for embedded visualizations.\n\nThis enables chimeric visualizations where some nodes contain entire embedded\nvisualizations (like a Sankey node that contains a force network).\n\nThe child tree is rendered in its own coordinate space, isolated from the parent.\nTransform configuration specifies how to map between parent and child coordinates.\n\nExample: Embedded network in Sankey node\n```purescript\nlocalCoordSpace\n  { scaleX: \\d -> 100.0  -- child width\n  , scaleY: \\d -> 100.0  -- child height\n  }\n  forceNetworkTree\n```\n","info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["scaleX",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["scaleY",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["child",{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[232,20],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[232,3]},"title":"LocalCoordSpace"}],"comments":"A tree is either a regular node or a data join point\n","info":{"dataDeclType":"data","declType":"data","roles":["Representational"],"typeArguments":[["datum",null]]},"kind":null,"sourceSpan":{"end":[236,8],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[131,1]},"title":"Tree"},{"children":[],"comments":"A node in the visualization tree\n- name: Optional name to retrieve this selection later (Nothing = anonymous)\n- elemType: What kind of element (SVG, Group, Circle, etc.)\n- attrs: Attributes to set on this element\n- behaviors: Behaviors to attach (zoom, drag, click handlers, etc.)\n- children: Child nodes\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["name",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["elemType",{"annotation":[],"contents":[["PSD3","Internal","Selection","Types"],"ElementType"],"tag":"TypeConstructor"},{"annotation":[],"contents":["attrs",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Internal","Attribute"],"Attribute"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["behaviors",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Internal","Behavior","Types"],"Behavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["children",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[128,4],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[122,1]},"title":"TreeNode"},{"children":[],"comments":"Unified behavior specification for any GUP phase (enter, update, or exit)\n\nEach phase can specify:\n- `attrs`: Attributes to apply for this phase\n- `transition`: Optional animation configuration\n\nFor enter: attrs are initial state before animating to template attrs\nFor update: attrs override template attrs, then animate\nFor exit: attrs applied before animating out and removing\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["attrs",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Internal","Attribute"],"Attribute"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["transition",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Internal","Transition","Types"],"TransitionConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[250,4],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[247,1]},"title":"PhaseBehavior"},{"children":[],"comments":"Complete GUP (General Update Pattern) behavior specification\n\nBundles enter/update/exit behaviors together. Each phase is optional -\nif Nothing, the phase uses default behavior (no special attrs, no animation).\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["enter",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"PhaseBehavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["update",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"PhaseBehavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["exit",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"PhaseBehavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[260,4],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[256,1]},"title":"GUPBehaviors"},{"children":[],"comments":"Smart constructors\nCreate a named element\n\nUsage: named SVG \"svg\" [width 800, height 600]\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Internal","Selection","Types"],"ElementType"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Internal","Attribute"],"Attribute"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[267,86],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[267,1]},"title":"named"},{"children":[],"comments":"Create an anonymous element (won't be in the returned selections)\n\nUsage: elem Group [class_ \"container\"]\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Internal","Selection","Types"],"ElementType"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Internal","Attribute"],"Attribute"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[274,75],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[274,1]},"title":"elem"},{"children":[],"comments":"Add a single child to a tree node\n\nUsage: parent `withChild` child\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[281,66],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[281,1]},"title":"withChild"},{"children":[],"comments":"Add multiple children to a tree node\n\nUsage: parent `withChildren` [child1, child2, child3]\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[294,77],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[294,1]},"title":"withChildren"},{"children":[],"comments":"Add behaviors to a tree node\n\nBehaviors are attached to the element after creation.\nThis enables declarative specification of zoom, drag, click handlers, etc.\n\nUsage:\n```purescript\nnamed SVG \"svg\" [width 800, height 600]\n  `withBehaviors` [Zoom $ defaultZoom (ScaleExtent 0.1 10.0) \".zoom-group\"]\n  `withChildren` [...]\n```\n\nMultiple behaviors can be attached:\n```purescript\nelem Circle [radius 5.0]\n  `withBehaviors` [Drag SimpleDrag, onClickWithDatum \\d -> log d.name]\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Internal","Behavior","Types"],"Behavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[321,82],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[321,1]},"title":"withBehaviors"},{"children":[],"comments":"Create a named data join\n\nThe join itself becomes a named selection representing the COLLECTION\nof elements created from the data.\n\nUsage:\n```purescript\njoinData \"nodes\" \"g\" nodeData $ \\node ->\n  elem Group [transform (translate node)] `withChildren`\n    [ elem Circle [radius node.r]\n    , elem Text [textContent node.name]\n    ]\n```\n\nLater you can access the collection:\n```purescript\ncase Map.lookup \"nodes\" selections of\n  Just nodeGroups -> addTickFunction \"nodes\" $ Step nodeGroups [...]\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[350,97],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[350,1]},"title":"joinData"},{"children":[],"comments":"Create a nested data join with decomposition\n\nThis allows the datum type to change at each level of nesting.\nThe decomposer extracts inner collections from outer data items.\n\nUsage:\n```purescript\n-- 2D array → table\nnestedJoin \"rows\" \"tr\" matrixData identity $ \\rowData ->\n  nestedJoin \"cells\" \"td\" [rowData] identity $ \\cellValue ->\n    elem Td [textContent (show cellValue)]\n```\n\nOr more commonly:\n```purescript\n-- Array of records with nested arrays\nnestedJoin \"groups\" \"g\" groups (_.items) $ \\item ->\n  elem Circle [cx item.x, cy item.y]\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"outerDatum","kind":null,"skolem":null,"type":{"annotation":[],"contents":{"identifier":"innerDatum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"outerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"outerDatum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"outerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[380,21],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[373,1]},"title":"nestedJoin"},{"children":[],"comments":"Create an update join with General Update Pattern behavior\n\nThis is the declarative way to specify enter/update/exit behavior.\nThe interpreter handles all the complexity of computing joins and applying transitions.\n\nUsage:\n```purescript\nupdateJoin \"nodes\" \"circle\" nodeData\n  (\\node -> elem Circle [ cx node.x, cy node.y, radius 5.0 ])\n  { enter: Just { attrs: [ y 0.0, opacity 0.0 ], transition: Just slideDown }\n  , update: Just { attrs: [], transition: Just moveToPosition }\n  , exit: Just { attrs: [ class_ \"exit\" ], transition: Just fadeOut }\n  , keyFn: Just _.id  -- Optional key function for identity matching\n  }\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["enter",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"PhaseBehavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["update",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"PhaseBehavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["exit",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"PhaseBehavior"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["keyFn",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[418,16],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[407,1]},"title":"updateJoin"},{"children":[],"comments":"Create an update nested join with type decomposition and GUP behaviors\n\nThis is the RECOMMENDED way to use UpdateJoin - it combines type decomposition\nwith enter/update/exit behaviors, solving the type mixing problem.\n\nUsage:\n```purescript\n-- Container has SceneData, decompose to DataPoints, each gets GUP\nupdateNestedJoin \"circles\" \"circle\"\n  [sceneData]              -- Outer data (SceneData)\n  (_.points)               -- Decompose: SceneData -> Array DataPoint\n  (\\point -> elem Circle   -- Template for each DataPoint\n    [ cx point.x\n    , cy point.y\n    ])\n  { enter: Just { attrs: [radius 0.0], transition: Just fadeIn }\n  , update: Just { attrs: [], transition: Just move }\n  , exit: Just { attrs: [], transition: Just fadeOut }\n  }\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"outerDatum","kind":null,"skolem":null,"type":{"annotation":[],"contents":{"identifier":"innerDatum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"outerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"outerDatum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"GUPBehaviors"],"tag":"TypeConstructor"},{"annotation":[],"contents":"innerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"outerDatum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[457,21],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[449,1]},"title":"updateNestedJoin"},{"children":[],"comments":"Create a conditional render that chooses specs based on predicates\n\nThis is the foundation for chimeric visualizations - rendering different\nvisual representations based on data properties.\n\nUsage:\n```purescript\nconditionalRender\n  [ { predicate: \\d -> d.nodeType == \"cluster\"\n    , spec: \\d -> forceNetworkSpec d\n    }\n  , { predicate: \\d -> d.nodeType == \"normal\"\n    , spec: \\d -> normalNodeSpec d\n    }\n  ]\n```\n\nThe first matching predicate determines which spec to render.\nIf no predicates match, nothing is rendered.\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["predicate",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["spec",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[493,16],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[490,1]},"title":"conditionalRender"},{"children":[],"comments":"Combinator version that takes a fallback spec for unmatched cases\n\nUsage:\n```purescript\nconditionalRenderOr\n  [ { predicate: isCluster, spec: clusterSpec }\n  , { predicate: isSpecial, spec: specialSpec }\n  ]\n  defaultSpec  -- Used when no predicate matches\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["predicate",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["spec",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[510,16],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[506,1]},"title":"conditionalRenderOr"},{"children":[],"comments":"Create a local coordinate space for embedded visualizations\n\nThis enables nesting one visualization inside another with its own\ncoordinate system.\n\nUsage:\n```purescript\nlocalCoordSpace\n  { scaleX: \\d -> d.width   -- Local coordinate width\n  , scaleY: \\d -> d.height  -- Local coordinate height\n  }\n  embeddedVizTree\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["scaleX",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["scaleY",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[531,16],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[527,1]},"title":"localCoordSpace"},{"children":[],"comments":"Simplified version with fixed dimensions\n\nUsage:\n```purescript\nlocalCoordSpaceFixed 100.0 100.0 embeddedVizTree\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[550,16],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[545,1]},"title":"localCoordSpaceFixed"},{"children":[],"comments":"Combine two trees as siblings\nReturns an array, meant to be used with `withChildren`\n\nUsage: group `withChildren` (circle +: text)\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[567,71],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[567,1]},"title":"beside"},{"children":[],"comments":"Helper to combine multiple siblings\n\nUsage: siblings [child1, child2, child3]\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","AST"],"Tree"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[573,67],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[573,1]},"title":"siblings"},{"children":[],"comments":"Operators for Emmet-style syntax\n","info":{"alias":[["PSD3","AST"],{"Right":{"Left":{"Ident":"withChild"}}}],"declType":"alias","fixity":{"associativity":"infixl","precedence":6}},"kind":null,"sourceSpan":{"end":[560,25],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[560,1]},"title":"(>:)"},{"children":[],"comments":null,"info":{"alias":[["PSD3","AST"],{"Right":{"Left":{"Ident":"beside"}}}],"declType":"alias","fixity":{"associativity":"infixl","precedence":5}},"kind":null,"sourceSpan":{"end":[561,22],"name":"../purescript-psd3-selection/src/PSD3/AST.purs","start":[561,1]},"title":"(+:)"}],"name":"PSD3.AST","reExports":[]}