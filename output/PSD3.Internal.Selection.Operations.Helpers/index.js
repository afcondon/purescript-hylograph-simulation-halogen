// Generated by purs version 0.15.15
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Traversable from "../Data.Traversable/index.js";
import * as Effect from "../Effect/index.js";
import * as PSD3_Internal_Selection_Operations_Conversions from "../PSD3.Internal.Selection.Operations.Conversions/index.js";
import * as PSD3_Internal_Selection_Types from "../PSD3.Internal.Selection.Types/index.js";
import * as Web_DOM_Document from "../Web.DOM.Document/index.js";
import * as Web_DOM_Element from "../Web.DOM.Element/index.js";
import * as Web_DOM_NodeList from "../Web.DOM.NodeList/index.js";
import * as Web_DOM_ParentNode from "../Web.DOM.ParentNode/index.js";
var traverse = /* #__PURE__ */ Data_Traversable.traverse(Data_Traversable.traversableArray)(Effect.applicativeEffect);
var pure = /* #__PURE__ */ Control_Applicative.pure(Effect.applicativeEffect);
var querySelectorAllElements = function (selector) {
    return function (parents) {
        return function __do() {
            var nodeArrays = traverse(function (parent) {
                var parentNode = Web_DOM_Element.toParentNode(parent);
                return function __do() {
                    var nodeList = Web_DOM_ParentNode.querySelectorAll(selector)(parentNode)();
                    var nodes = Web_DOM_NodeList.toArray(nodeList)();
                    return Data_Array.mapMaybe(Web_DOM_Element.fromNode)(nodes);
                };
            })(parents)();
            return Data_Array.concat(nodeArrays);
        };
    };
};
var queryFirstChild = function (selector) {
    return function (parent) {
        var parentNode = Web_DOM_Element.toParentNode(parent);
        return Web_DOM_ParentNode.querySelector(selector)(parentNode);
    };
};
var getDocument = function (v) {
    if (v instanceof PSD3_Internal_Selection_Types.EmptySelection) {
        return pure(v.value0.document);
    };
    if (v instanceof PSD3_Internal_Selection_Types.BoundSelection) {
        return pure(v.value0.document);
    };
    if (v instanceof PSD3_Internal_Selection_Types.PendingSelection) {
        return pure(v.value0.document);
    };
    if (v instanceof PSD3_Internal_Selection_Types.ExitingSelection) {
        return pure(v.value0.document);
    };
    throw new Error("Failed pattern match at PSD3.Internal.Selection.Operations.Helpers (line 34, column 1 - line 34, column 82): " + [ v.constructor.name ]);
};
var createElementWithNS = function (elemType) {
    return function (doc) {
        var v = PSD3_Internal_Selection_Types.elementContext(elemType);
        if (v instanceof PSD3_Internal_Selection_Types.SVGContext) {
            return Web_DOM_Document.createElementNS(new Data_Maybe.Just("http://www.w3.org/2000/svg"))(PSD3_Internal_Selection_Operations_Conversions.elementTypeToString(elemType))(doc);
        };
        if (v instanceof PSD3_Internal_Selection_Types.HTMLContext) {
            return Web_DOM_Document.createElement(PSD3_Internal_Selection_Operations_Conversions.elementTypeToString(elemType))(doc);
        };
        throw new Error("Failed pattern match at PSD3.Internal.Selection.Operations.Helpers (line 48, column 3 - line 54, column 64): " + [ v.constructor.name ]);
    };
};
export {
    getDocument,
    createElementWithNS,
    querySelectorAllElements,
    queryFirstChild
};
//# sourceMappingURL=index.js.map
