{"comments":"Pure Force Engine Core\n\nThis module provides the core force simulation loop.\nWe use D3's force calculation algorithms but manage the simulation ourselves.\n\nKey principle: Forces are just functions that mutate vx/vy on nodes.\nWe control when they run and how alpha decays.\n","declarations":[{"children":[],"comments":null,"info":{"dataDeclType":"data","declType":"data","roles":[],"typeArguments":[]},"kind":null,"sourceSpan":{"end":[66,40],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[66,1]},"title":"ForceHandle"},{"children":[],"comments":"Create a many-body (charge) force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"ManyBodyConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[115,48],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[115,1]},"title":"createManyBody"},{"children":[],"comments":"Create a collision force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"CollideConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[119,46],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[119,1]},"title":"createCollide"},{"children":[],"comments":"Create a link force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"LinkConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[123,40],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[123,1]},"title":"createLink"},{"children":[],"comments":"Create a centering force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"CenterConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[127,44],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[127,1]},"title":"createCenter"},{"children":[],"comments":"Create an X positioning force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"ForceXConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[131,44],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[131,1]},"title":"createForceX"},{"children":[],"comments":"Create a Y positioning force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"ForceYConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[135,44],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[135,1]},"title":"createForceY"},{"children":[],"comments":"Create a radial force\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"RadialConfig"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[139,44],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[139,1]},"title":"createRadial"},{"children":[],"comments":"Create a many-body force that only applies to nodes matching a predicate\nUseful for applying charge only to certain node types (e.g., tree parents)\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"node","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"ManyBodyFilteredConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[148,82],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[148,1]},"title":"createManyBodyFiltered"},{"children":[],"comments":"Create a radial force that only applies to nodes matching a predicate\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"node","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"RadialFilteredConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[152,78],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[152,1]},"title":"createRadialFiltered"},{"children":[],"comments":"Create a collision force with dynamic radius per-node\nThe radiusAccessor function is called for each node to determine collision radius\nExample: `{ radiusAccessor: \\n -> n.r + 5.0, strength: 1.0, iterations: 1 }`\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"node","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"CollideDynamicConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[158,78],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[158,1]},"title":"createCollideDynamic"},{"children":[],"comments":"Create an X positioning force with dynamic target per-node\nThe xAccessor function is called for each node to determine target X\nUseful for clustering (e.g., modules toward their parent package's X)\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"node","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"ForceXDynamicConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[164,76],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[164,1]},"title":"createForceXDynamic"},{"children":[],"comments":"Create a Y positioning force with dynamic target per-node\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"node","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"ForceYDynamicConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"node","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[168,76],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[168,1]},"title":"createForceYDynamic"},{"children":[],"comments":"Create a link force with dynamic strength per-link\nThe strengthAccessor function is called for each link to determine strength\nUseful for encoding link weight as force strength\nExample: `{ distance: 30.0, strengthAccessor: \\link -> link.weight, iterations: 1 }`\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"link","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Types"],"LinkDynamicConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"link","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[175,72],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[175,1]},"title":"createLinkDynamic"},{"children":[],"comments":"Create an X positioning force that reads node.gridX directly\nMuch faster than createForceXDynamic because it avoids FFI callbacks.\nNodes must have a `gridX :: Number` field.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[185,42],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[185,1]},"title":"createForceXGrid"},{"children":[],"comments":"Create a Y positioning force that reads node.gridY directly\nMuch faster than createForceYDynamic because it avoids FFI callbacks.\nNodes must have a `gridY :: Number` field.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[191,42],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[191,1]},"title":"createForceYGrid"},{"children":[],"comments":"Create a collision force that reads node.r directly\nMuch faster than createCollideDynamic because it avoids FFI callbacks.\nNodes must have an `r :: Number` field (radius).\nParameters: padding, strength, iterations\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Int"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[198,60],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[198,1]},"title":"createCollideGrid"},{"children":[],"comments":"Initialize nodes with indices and default velocities\nThis mutates the nodes array to add index, vx, vy if missing\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[207,58],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[207,1]},"title":"initializeNodes"},{"children":[],"comments":"Initialize a force with nodes\nMust be called before applying the force\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[212,80],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[212,1]},"title":"initializeForce"},{"children":[],"comments":"Initialize a link force with nodes and links\nLink forces need both nodes and links\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"nodeRow","kind":null,"skolem":null,"type":{"annotation":[],"contents":{"identifier":"linkRow","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"nodeRow","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"linkRow","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[217,127],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[217,1]},"title":"initializeLinkForce"},{"children":[],"comments":"Apply a single force\nThis mutates vx/vy on the nodes the force was initialized with\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[226,51],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[226,1]},"title":"applyForce"},{"children":[],"comments":"Apply multiple forces in sequence\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[230,58],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[230,1]},"title":"applyForces"},{"children":[],"comments":"Integrate positions: apply velocity decay and update positions\nCall this once per tick after all forces have been applied\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[235,71],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[235,1]},"title":"integratePositions"},{"children":[],"comments":"Calculate new alpha value (the \"cooling\" step)\nReturns 0 if alpha falls below alphaMin\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[240,61],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[240,1]},"title":"decayAlpha"},{"children":[],"comments":"Complete simulation tick:\n1. Apply all forces\n2. Integrate positions\n3. Return new alpha\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["forces",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"ForceHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["nodes",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["alpha",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["alphaMin",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["alphaDecay",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["alphaTarget",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["velocityDecay",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[256,19],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[247,1]},"title":"simulationTick"},{"children":[],"comments":"Handle to a running animation (can be used to stop it)\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[272,35],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[272,1]},"title":"AnimationHandle"},{"children":[],"comments":"Start an animation loop\nThe callback receives the current timestamp and should return whether to continue\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"AnimationHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[276,71],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[276,1]},"title":"startAnimation"},{"children":[],"comments":"Stop a running animation\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Core"],"AnimationHandle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[299,48],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[299,1]},"title":"stopAnimation"},{"children":[],"comments":"Attach drag with a reheat callback\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Web","DOM","Internal","Types"],"Element"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[317,68],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[317,1]},"title":"attachDragWithReheat"},{"children":[],"comments":"Attach drag to transformed group elements (like bubble packs)\n\nUnlike `attachDragWithReheat`, this version takes a container selector to\nget pointer coordinates in the correct coordinate space. Use this when\ndragging `<g>` elements that have `transform` attributes.\n\nExample:\n```purescript\n-- For bubble packs inside a zoom group\nattachGroupDragWithReheat packElements \"#zoom-group\" (Sim.reheat sim)\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Web","DOM","Internal","Types"],"Element"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[334,83],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[334,1]},"title":"attachGroupDragWithReheat"},{"children":[],"comments":"Attach drag with toggle-pinning behavior\n\nUnlike `attachDragWithReheat`, this version keeps nodes pinned after drag ends.\n- First drag: pins the node where you drop it\n- Subsequent drags: if you barely move (< 3px), unpins the node\n\nThis is useful for allowing users to \"fix\" certain nodes in place while\nletting others float freely in the simulation.\n\nExample:\n```purescript\nnodeElements <- getElementsByClassName \"node\"\nattachPinningDrag nodeElements (Sim.reheat sim)\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Web","DOM","Internal","Types"],"Element"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[354,65],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[354,1]},"title":"attachPinningDrag"},{"children":[],"comments":"Query DOM elements by CSS selector\n\nReturns all elements matching the given CSS selector.\nUseful for getting element references for drag behavior attachment.\n\nExample:\n```purescript\nnodeCircles <- querySelectorElements \"#my-graph circle.node\"\nattachPinningDrag nodeCircles (Sim.reheat sim)\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Web","DOM","Internal","Types"],"Element"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[374,58],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[374,1]},"title":"querySelectorElements"},{"children":[],"comments":"Log node positions for debugging\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[382,61],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Core.purs","start":[382,1]},"title":"logNodes"}],"name":"PSD3.ForceEngine.Core","reExports":[]}