{"comments":"Tick Consumers\n\nAdapters that wrap various animation sources as TickConsumers\nfor use with the Coordinator.\n\nSupported:\n- TransitionState from Engine.purs\n- TransitionGroup from Engine.purs\n- D3 force simulation (via ForceEngine)\n\nDocumented (requires local FFI):\n- WASM force kernel (see pattern at bottom of file)\n","declarations":[{"children":[],"comments":"Create a tick function for a single transition.\n\nTakes a Ref to the transition state and an effect to run on each tick\nwith the current value. Returns Completed when the transition finishes.\n\nUsage:\n```purescript\nstateRef <- Ref.new (Engine.start mySpec)\nlet consumer = transitionConsumer stateRef \\value -> setOpacity element value\nC.register coord { tick: consumer, onComplete: log \"done\" }\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"a","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect","Ref"],"Ref"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","Transition","Engine"],"TransitionState"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Milliseconds"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"TickResult"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[55,23],"name":"../purescript-psd3-simulation/src/PSD3/Transition/Consumers.purs","start":[50,1]},"title":"transitionConsumer"},{"children":[],"comments":"Create a tick function for a group of coordinated transitions.\n\nTakes a Ref to the group and an effect to run on each tick with\nall current values. Returns Completed when all transitions finish.\n\nUsage:\n```purescript\ngroupRef <- Ref.new (Engine.group [spec1, spec2, spec3])\nlet consumer = transitionGroupConsumer groupRef \\[x, y, opacity] -> do\n      setPosition element x y\n      setOpacity element opacity\nC.register coord { tick: consumer, onComplete: log \"all done\" }\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect","Ref"],"Ref"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Engine"],"TransitionGroup"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Milliseconds"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"TickResult"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[86,23],"name":"../purescript-psd3-simulation/src/PSD3/Transition/Consumers.purs","start":[82,1]},"title":"transitionGroupConsumer"},{"children":[],"comments":"Create a tick function for a D3 force simulation.\n\nThe simulation's `tick` function is called on each frame.\nReturns Converged with the alpha value, or Completed when alpha drops below threshold.\n\n**Important**: Do NOT call `FE.start` on the simulation - the Coordinator\nowns the RAF loop. Just call `FE.create`, `FE.setNodes`, `FE.addForce`, etc.\n\nUsage:\n```purescript\nsim <- FE.create FE.defaultConfig\nFE.setNodes myNodes sim\nFE.addForce (FE.ManyBody \"charge\" FE.defaultManyBody) sim\n\nC.register coord\n  { tick: simulationConsumer sim 0.001 \\nodes -> renderNodes nodes\n  , onComplete: log \"Simulation converged!\"\n  }\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"row","kind":null,"skolem":null,"type":{"annotation":[],"contents":{"identifier":"linkRow","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["PSD3","ForceEngine","Simulation"],"Simulation"],"tag":"TypeConstructor"},{"annotation":[],"contents":"row","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":"linkRow","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Milliseconds"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"TickResult"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[125,23],"name":"../purescript-psd3-simulation/src/PSD3/Transition/Consumers.purs","start":[119,1]},"title":"simulationConsumer"}],"name":"PSD3.Transition.Consumers","reExports":[]}