{"comments":"Tick Coordinator\n\nA unified animation coordinator that owns the RAF loop and routes ticks\nto multiple consumers (transitions, simulations, etc).\n\nKey concepts:\n- **Single RAF loop**: One coordinator per visualization, no competing frames\n- **TickConsumer**: Anything that needs ticks (transitions, simulations)\n- **Pull model**: Consumers compute on tick, coordinator reads results\n\nUsage:\n```purescript\nimport PSD3.Transition.Coordinator as C\n\nmain = do\n  coord <- C.create\n\n  -- Register a transition\n  transitionId <- C.register coord\n    { tick: \\dt -> do\n        -- advance transition\n        pure C.StillRunning\n    , onComplete: log \"done!\"\n    }\n\n  -- Start the loop\n  C.start coord\n```\n","declarations":[{"children":[],"comments":"The tick coordinator - owns the RAF loop\n","info":{"dataDeclType":"newtype","declType":"data","roles":[],"typeArguments":[]},"kind":null,"sourceSpan":{"end":[92,57],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[92,1]},"title":"Coordinator"},{"children":[],"comments":"Create a new coordinator.\nThe coordinator starts in stopped state - call `start` to begin.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Coordinator"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[100,29],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[100,1]},"title":"create"},{"children":[],"comments":"Start the animation loop.\nDoes nothing if already running.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Coordinator"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[142,36],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[142,1]},"title":"start"},{"children":[],"comments":"Stop the animation loop.\nConsumers remain registered but stop receiving ticks.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Coordinator"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[152,35],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[152,1]},"title":"stop"},{"children":[],"comments":"Check if the coordinator is currently running.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Coordinator"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[160,43],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[160,1]},"title":"isRunning"},{"children":[{"comments":null,"info":{"declType":"instance","dependencies":[],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Eq"],"Eq"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"ConsumerId"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"sourceSpan":{"end":[67,30],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[67,1]},"title":"<anonymous>"}],"comments":"Unique identifier for a registered consumer\n","info":{"dataDeclType":"newtype","declType":"data","roles":[],"typeArguments":[]},"kind":null,"sourceSpan":{"end":[65,36],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[65,1]},"title":"ConsumerId"},{"children":[{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[71,17],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[71,3]},"title":"StillRunning"},{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[72,14],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[72,3]},"title":"Completed"},{"comments":null,"info":{"arguments":[{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"declType":"dataConstructor"},"sourceSpan":{"end":[73,14],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[73,3]},"title":"Converged"}],"comments":"Result of a tick - tells coordinator what to do next\n","info":{"dataDeclType":"data","declType":"data","roles":[],"typeArguments":[]},"kind":null,"sourceSpan":{"end":[73,21],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[70,1]},"title":"TickResult"},{"children":[],"comments":"A tick consumer - anything that needs animation frames\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["id",{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"ConsumerId"],"tag":"TypeConstructor"},{"annotation":[],"contents":["tick",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Milliseconds"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"TickResult"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["onComplete",{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[80,4],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[76,1]},"title":"Consumer"},{"children":[],"comments":"Register a consumer to receive ticks.\nReturns an ID that can be used to unregister later.\nIf the coordinator is running, the consumer starts receiving ticks immediately.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Coordinator"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["tick",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Milliseconds"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"TickResult"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":["onComplete",{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"ConsumerId"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[121,23],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[118,1]},"title":"register"},{"children":[],"comments":"Unregister a consumer. It will no longer receive ticks.\nIf this was the last consumer, the loop continues but does nothing.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"Coordinator"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","Transition","Coordinator"],"ConsumerId"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[132,55],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[132,1]},"title":"unregister"},{"children":[],"comments":"Time delta in milliseconds\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}},"kind":null,"sourceSpan":{"end":[62,27],"name":"../purescript-psd3-selection/src/PSD3/Transition/Coordinator.purs","start":[62,1]},"title":"Milliseconds"}],"name":"PSD3.Transition.Coordinator","reExports":[]}