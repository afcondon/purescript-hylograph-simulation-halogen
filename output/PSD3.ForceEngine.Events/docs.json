{"comments":"Simulation Events\n\nEvent types and callback system for force simulations.\nDesigned for integration with UI frameworks like Halogen.\n\nKey design principles:\n1. Callbacks are `Effect Unit` - no monadic overhead in hot path\n2. All callbacks are optional (stored in Refs, default to no-op)\n3. Event types are for documentation/Halogen integration, not for internal use\n","declarations":[{"children":[{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[47,9],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[47,3]},"title":"Tick"},{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[48,12],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[48,3]},"title":"Started"},{"comments":null,"info":{"arguments":[],"declType":"dataConstructor"},"sourceSpan":{"end":[49,12],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[49,3]},"title":"Stopped"},{"comments":null,"info":{"arguments":[{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"declType":"dataConstructor"},"sourceSpan":{"end":[50,17],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[50,3]},"title":"AlphaDecayed"},{"comments":null,"info":{"declType":"instance","dependencies":[],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Eq"],"Eq"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationEvent"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"sourceSpan":{"end":[52,35],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[52,1]},"title":"<anonymous>"},{"comments":null,"info":{"declType":"instance","dependencies":[],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Show"],"Show"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationEvent"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"sourceSpan":{"end":[58,52],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[54,1]},"title":"<anonymous>"}],"comments":"Events that can occur during simulation lifecycle.\n\nThese types are primarily for Halogen integration via subscriptions.\nInternally, callbacks are invoked directly without constructing these values.\n\nUsage with Halogen:\n```purescript\nhandleAction (SimEvent event) = case event of\n  Tick -> liftEffect updateDOMPositions\n  Started -> H.modify_ _ { simRunning = true }\n  Stopped -> H.modify_ _ { simRunning = false }\n  AlphaDecayed alpha -> when (alpha < 0.1) $ liftEffect doSomething\n```\n","info":{"dataDeclType":"data","declType":"data","roles":[],"typeArguments":[]},"kind":null,"sourceSpan":{"end":[50,24],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[46,1]},"title":"SimulationEvent"},{"children":[],"comments":"Callbacks for simulation events.\n\nAll callbacks are stored in Refs to allow dynamic updates and to keep\nthe tick loop allocation-free (no closures created per-tick).\n\nThe callbacks are `Effect Unit` rather than taking event data because:\n1. Performance: No boxing/unboxing of event data in hot path\n2. Simplicity: Consumers can read simulation state directly if needed\n3. Flexibility: The consumer decides what data they need\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["onTick",{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect","Ref"],"Ref"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["onStart",{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect","Ref"],"Ref"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["onStop",{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect","Ref"],"Ref"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["onAlphaThreshold",{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect","Ref"],"Ref"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[84,4],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[73,1]},"title":"SimulationCallbacks"},{"children":[],"comments":"Create default callbacks (all no-ops).\n\nUsage:\n```purescript\ncallbacks <- defaultCallbacks\nRef.write updateDOMPositions callbacks.onTick\nsim <- createWithCallbacks config callbacks\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationCallbacks"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[94,47],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[94,1]},"title":"defaultCallbacks"},{"children":[],"comments":"Set the tick callback.\n\nWARNING: This callback runs 60x/second during simulation.\nKeep it fast! Avoid allocations, complex logic, or console.log.\n\nGood:\n```purescript\nonSimulationTick (updateGroupPositions nodes) callbacks\n```\n\nBad:\n```purescript\nonSimulationTick (do\n  nodes <- Ref.read nodesRef  -- Extra ref read\n  log \"tick\"                   -- Console I/O\n  H.tell ...                   -- Halogen message (allocates)\n) callbacks\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationCallbacks"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[129,70],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[129,1]},"title":"onSimulationTick"},{"children":[],"comments":"Set the start callback.\n\nCalled when simulation starts running or is reheated from stopped state.\nSafe to do heavier work here (only called occasionally).\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationCallbacks"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[136,71],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[136,1]},"title":"onSimulationStart"},{"children":[],"comments":"Set the stop callback.\n\nCalled when simulation stops (alpha < alphaMin).\nSafe to do heavier work here.\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationCallbacks"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[143,70],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[143,1]},"title":"onSimulationStop"},{"children":[],"comments":"Set the alpha threshold callback.\n\nCalled when alpha crosses common thresholds: 0.5, 0.1, 0.01.\nThe callback receives the new alpha value.\n\nUseful for:\n- Progressive rendering (show more detail as simulation settles)\n- UI updates (e.g., hide \"Simulating...\" spinner)\n- Analytics (track how long simulations run)\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["PSD3","ForceEngine","Events"],"SimulationCallbacks"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[155,78],"name":"../purescript-psd3-simulation/src/PSD3/ForceEngine/Events.purs","start":[155,1]},"title":"onAlphaDecay"}],"name":"PSD3.ForceEngine.Events","reExports":[]}